<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link
            rel="shortcut icon"
            href="/assets/logo.webp"
            type="image/x-icon"
        />
        <link rel="stylesheet" href="/style.css" />
        <title>GRIM UI </title>
        
        <script type="module" src="/plugins/issue.js"></script>
        <script type="module" src="/plugins/error.js"></script>
        <script type="module" src="/plugins/mermaid.js"></script>
    </head>
    <body>
        <nav>
            <a href="/"
                ><img src="/assets/logo.webp" alt="" title="DECODE" /> GRIM
                Docs</a
            >
        </nav>
        <main><h1 id="flexbox">Flexbox</h1>
<p>Flexbox is a high level positioning plugin that allows for dynamic positioning of elements based apon container sizing. To learn more about flexbox refer to this <a href="https://developer.mozilla.org/en-US/docs/Learn/CSS/CSS_layout/Flexbox">MDN article</a>, in this document we will go into the impleamentation of flexbox rather than the usage of it.</p>
<blockquote>
<p>&quot;display&quot;: &quot;flex&quot;,
&quot;justify-content&quot;: &quot;*&quot;,
&quot;align-content&quot;: &quot;*&quot;,
&quot;align-items&quot;: &quot;*&quot;,
&quot;flex-wrap&quot;: &quot;*&quot;,
&quot;flex-direction&quot;: &quot;*&quot;,</p>
</blockquote>
<h2 id="flex-properties"><a class="anchor" href="#flex-properties">#</a> Flex Properties</h2>
<table>
<thead>
<tr>
<th>justify-content</th>
<th>align-content</th>
<th>align-items</th>
<th>flex-wrap</th>
<th>flex-direction</th>
</tr>
</thead>
<tbody>
<tr>
<td>normal</td>
<td>normal</td>
<td>normal</td>
<td>nowrap</td>
<td>row</td>
</tr>
<tr>
<td>center</td>
<td>center</td>
<td>center</td>
<td>wrap</td>
<td>column</td>
</tr>
<tr>
<td>flex-start</td>
<td>flex-start</td>
<td>flex-start</td>
<td></td>
<td>row-reverse</td>
</tr>
<tr>
<td>flex-end</td>
<td>flex-end</td>
<td>flex-end</td>
<td></td>
<td>column-reverse</td>
</tr>
<tr>
<td>space-between</td>
<td>space-between</td>
<td>stretch</td>
<td></td>
<td></td>
</tr>
<tr>
<td>space-around</td>
<td>space-around</td>
<td>baseline</td>
<td></td>
<td></td>
</tr>
<tr>
<td>space-evenly</td>
<td>stretch</td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="ordergo"><a class="anchor" href="#ordergo">#</a> order?(go)</h2>
<p>asd</p>
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;"><code><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">   1</span><span><span style="color:#f92672">package</span> <span style="color:#a6e22e">flex</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">   2</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">   3</span><span><span style="color:#f92672">import</span> (
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">   4</span><span>	<span style="color:#e6db74">&#34;gui/cstyle&#34;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">   5</span><span>	<span style="color:#e6db74">&#34;gui/cstyle/plugins/inline&#34;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">   6</span><span>	<span style="color:#e6db74">&#34;gui/element&#34;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">   7</span><span>	<span style="color:#e6db74">&#34;gui/utils&#34;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">   8</span><span>	<span style="color:#e6db74">&#34;sort&#34;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">   9</span><span>	<span style="color:#e6db74">&#34;strings&#34;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  10</span><span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  11</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  12</span><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">Init</span>() <span style="color:#a6e22e">cstyle</span>.<span style="color:#a6e22e">Plugin</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  13</span><span>	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">cstyle</span>.<span style="color:#a6e22e">Plugin</span>{
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  14</span><span>		<span style="color:#a6e22e">Selector</span>: <span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">n</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">element</span>.<span style="color:#a6e22e">Node</span>) <span style="color:#66d9ef">bool</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  15</span><span>			<span style="color:#a6e22e">styles</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#66d9ef">string</span>{
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  16</span><span>				<span style="color:#e6db74">&#34;display&#34;</span>: <span style="color:#e6db74">&#34;flex&#34;</span>,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  17</span><span>			}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  18</span><span>			<span style="color:#a6e22e">matches</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  19</span><span>			<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">name</span>, <span style="color:#a6e22e">value</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">styles</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  20</span><span>				<span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Style</span>[<span style="color:#a6e22e">name</span>] <span style="color:#f92672">!=</span> <span style="color:#a6e22e">value</span> <span style="color:#f92672">||</span> <span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Style</span>[<span style="color:#a6e22e">name</span>] <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;&#34;</span>) <span style="color:#f92672">&amp;&amp;</span> !(<span style="color:#a6e22e">value</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;*&#34;</span>) {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  21</span><span>					<span style="color:#a6e22e">matches</span> = <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  22</span><span>				}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  23</span><span>			}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  24</span><span>			<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">matches</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  25</span><span>		},
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  26</span><span>		<span style="color:#a6e22e">Level</span>: <span style="color:#ae81ff">3</span>,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  27</span><span>		<span style="color:#a6e22e">Handler</span>: <span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">n</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">element</span>.<span style="color:#a6e22e">Node</span>, <span style="color:#a6e22e">state</span> <span style="color:#f92672">*</span><span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#a6e22e">element</span>.<span style="color:#a6e22e">State</span>) {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  28</span><span>			<span style="color:#a6e22e">s</span> <span style="color:#f92672">:=</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">state</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  29</span><span>			<span style="color:#a6e22e">self</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">s</span>[<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  30</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  31</span><span>			<span style="color:#a6e22e">verbs</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">strings</span>.<span style="color:#a6e22e">Split</span>(<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Style</span>[<span style="color:#e6db74">&#34;flex-direction&#34;</span>], <span style="color:#e6db74">&#34;-&#34;</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  32</span><span>			<span style="color:#a6e22e">flexDirection</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">verbs</span>[<span style="color:#ae81ff">0</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  33</span><span>			<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">flexDirection</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;&#34;</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  34</span><span>				<span style="color:#a6e22e">flexDirection</span> = <span style="color:#e6db74">&#34;row&#34;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  35</span><span>			}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  36</span><span>			<span style="color:#a6e22e">flexReversed</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  37</span><span>			<span style="color:#66d9ef">if</span> len(<span style="color:#a6e22e">verbs</span>) &gt; <span style="color:#ae81ff">1</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  38</span><span>				<span style="color:#a6e22e">flexReversed</span> = <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  39</span><span>			}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  40</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  41</span><span>			<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">flexWrapped</span> <span style="color:#66d9ef">bool</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  42</span><span>			<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Style</span>[<span style="color:#e6db74">&#34;flex-wrap&#34;</span>] <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;wrap&#34;</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  43</span><span>				<span style="color:#a6e22e">flexWrapped</span> = <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  44</span><span>			} <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  45</span><span>				<span style="color:#a6e22e">flexWrapped</span> = <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  46</span><span>			}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  47</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  48</span><span>			<span style="color:#a6e22e">alignContent</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Style</span>[<span style="color:#e6db74">&#34;align-content&#34;</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  49</span><span>			<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">alignContent</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;&#34;</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  50</span><span>				<span style="color:#a6e22e">alignContent</span> = <span style="color:#e6db74">&#34;normal&#34;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  51</span><span>			}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  52</span><span>			<span style="color:#a6e22e">alignItems</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Style</span>[<span style="color:#e6db74">&#34;align-items&#34;</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  53</span><span>			<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">alignItems</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;&#34;</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  54</span><span>				<span style="color:#a6e22e">alignItems</span> = <span style="color:#e6db74">&#34;normal&#34;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  55</span><span>			}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  56</span><span>			<span style="color:#a6e22e">justifyItems</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Style</span>[<span style="color:#e6db74">&#34;justify-items&#34;</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  57</span><span>			<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">justifyItems</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;&#34;</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  58</span><span>				<span style="color:#a6e22e">justifyItems</span> = <span style="color:#e6db74">&#34;normal&#34;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  59</span><span>			}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  60</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  61</span><span>			<span style="color:#a6e22e">justifyContent</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Style</span>[<span style="color:#e6db74">&#34;justify-content&#34;</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  62</span><span>			<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">justifyContent</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;&#34;</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  63</span><span>				<span style="color:#a6e22e">justifyContent</span> = <span style="color:#e6db74">&#34;normal&#34;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  64</span><span>			}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  65</span><span>			<span style="color:#75715e">// fmt.Println(flexDirection, flexReversed, flexWrapped, hAlign, vAlign, justifyItems, justifyContent)
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  66</span><span><span style="color:#75715e"></span>			<span style="color:#a6e22e">rows</span> <span style="color:#f92672">:=</span> [][]<span style="color:#66d9ef">int</span>{}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  67</span><span>			<span style="color:#a6e22e">maxH</span> <span style="color:#f92672">:=</span> float32(<span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  68</span><span>			<span style="color:#75715e">// maxW := float32(0)
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  69</span><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  70</span><span>			<span style="color:#75715e">// Get inital sizing
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  71</span><span><span style="color:#75715e"></span>			<span style="color:#a6e22e">textTotal</span> <span style="color:#f92672">:=</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  72</span><span>			<span style="color:#a6e22e">textCounts</span> <span style="color:#f92672">:=</span> []<span style="color:#66d9ef">int</span>{}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  73</span><span>			<span style="color:#a6e22e">widths</span> <span style="color:#f92672">:=</span> []<span style="color:#66d9ef">float32</span>{}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  74</span><span>			<span style="color:#75715e">// heights := []float32{}
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  75</span><span><span style="color:#75715e"></span>			<span style="color:#a6e22e">innerSizes</span> <span style="color:#f92672">:=</span> [][]<span style="color:#66d9ef">float32</span>{}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  76</span><span>			<span style="color:#a6e22e">minWidths</span> <span style="color:#f92672">:=</span> []<span style="color:#66d9ef">float32</span>{}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  77</span><span>			<span style="color:#a6e22e">minHeights</span> <span style="color:#f92672">:=</span> []<span style="color:#66d9ef">float32</span>{}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  78</span><span>			<span style="color:#a6e22e">maxWidths</span> <span style="color:#f92672">:=</span> []<span style="color:#66d9ef">float32</span>{}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  79</span><span>			<span style="color:#75715e">// maxHeights := []float32{}
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  80</span><span><span style="color:#75715e"></span>			<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">v</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  81</span><span>				<span style="color:#a6e22e">count</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">countText</span>(<span style="color:#a6e22e">v</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  82</span><span>				<span style="color:#a6e22e">textTotal</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">count</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  83</span><span>				<span style="color:#a6e22e">textCounts</span> = append(<span style="color:#a6e22e">textCounts</span>, <span style="color:#a6e22e">count</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  84</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  85</span><span>				<span style="color:#a6e22e">minw</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">getMinWidth</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">v</span>, <span style="color:#a6e22e">state</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  86</span><span>				<span style="color:#a6e22e">minWidths</span> = append(<span style="color:#a6e22e">minWidths</span>, <span style="color:#a6e22e">minw</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  87</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  88</span><span>				<span style="color:#a6e22e">maxw</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">getMaxWidth</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">v</span>, <span style="color:#a6e22e">state</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  89</span><span>				<span style="color:#a6e22e">maxWidths</span> = append(<span style="color:#a6e22e">maxWidths</span>, <span style="color:#a6e22e">maxw</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  90</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  91</span><span>				<span style="color:#a6e22e">w</span>, <span style="color:#a6e22e">h</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">getInnerSize</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">v</span>, <span style="color:#a6e22e">state</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  92</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  93</span><span>				<span style="color:#a6e22e">minh</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">getMinHeight</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">v</span>, <span style="color:#a6e22e">state</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  94</span><span>				<span style="color:#a6e22e">minHeights</span> = append(<span style="color:#a6e22e">minHeights</span>, <span style="color:#a6e22e">minh</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  95</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  96</span><span>				<span style="color:#75715e">// maxh := getMaxHeight(&amp;v, state)
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  97</span><span><span style="color:#75715e"></span>				<span style="color:#75715e">// maxHeights = append(maxHeights, maxh)
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  98</span><span><span style="color:#75715e"></span>				<span style="color:#a6e22e">innerSizes</span> = append(<span style="color:#a6e22e">innerSizes</span>, []<span style="color:#66d9ef">float32</span>{<span style="color:#a6e22e">w</span>, <span style="color:#a6e22e">h</span>})
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  99</span><span>			}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 100</span><span>			<span style="color:#a6e22e">selfWidth</span> <span style="color:#f92672">:=</span> (<span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">Width</span> <span style="color:#f92672">-</span> <span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">Padding</span>.<span style="color:#a6e22e">Left</span>) <span style="color:#f92672">-</span> <span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">Padding</span>.<span style="color:#a6e22e">Right</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 101</span><span>			<span style="color:#a6e22e">selfHeight</span> <span style="color:#f92672">:=</span> (<span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">Height</span> <span style="color:#f92672">-</span> <span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">Padding</span>.<span style="color:#a6e22e">Top</span>) <span style="color:#f92672">-</span> <span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">Padding</span>.<span style="color:#a6e22e">Bottom</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 102</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 103</span><span>			<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">flexDirection</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;row&#34;</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 104</span><span>				<span style="color:#75715e">// if the elements are less than the size of the parent, don&#39;t change widths. Just set mins
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 105</span><span><span style="color:#75715e"></span>				<span style="color:#66d9ef">if</span> !<span style="color:#a6e22e">flexWrapped</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 106</span><span>					<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">add2d</span>(<span style="color:#a6e22e">innerSizes</span>, <span style="color:#ae81ff">0</span>) &lt; <span style="color:#a6e22e">selfWidth</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 107</span><span>						<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">innerSizes</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 108</span><span>							<span style="color:#75715e">// for i, _ := range n.Children {
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 109</span><span><span style="color:#75715e"></span>							<span style="color:#75715e">// vState := s[v.Properties.Id]
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 110</span><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 111</span><span>							<span style="color:#a6e22e">w</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">innerSizes</span>[<span style="color:#a6e22e">i</span>][<span style="color:#ae81ff">0</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 112</span><span>							<span style="color:#75715e">// w -= vState.Margin.Left + vState.Margin.Right + (vState.Border.Width * 2)
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 113</span><span><span style="color:#75715e"></span>							<span style="color:#a6e22e">widths</span> = append(<span style="color:#a6e22e">widths</span>, <span style="color:#a6e22e">w</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 114</span><span>						}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 115</span><span>					} <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 116</span><span>						<span style="color:#75715e">// Modifiy the widths so they aren&#39;t under the mins
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 117</span><span><span style="color:#75715e"></span>						<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span>, <span style="color:#a6e22e">v</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 118</span><span>							<span style="color:#a6e22e">vState</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">s</span>[<span style="color:#a6e22e">v</span>.<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 119</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 120</span><span>							<span style="color:#a6e22e">w</span> <span style="color:#f92672">:=</span> ((<span style="color:#a6e22e">selfWidth</span> <span style="color:#f92672">/</span> float32(<span style="color:#a6e22e">textTotal</span>)) <span style="color:#f92672">*</span> float32(<span style="color:#a6e22e">textCounts</span>[<span style="color:#a6e22e">i</span>]))
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 121</span><span>							<span style="color:#a6e22e">w</span> <span style="color:#f92672">-=</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Left</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Right</span> <span style="color:#f92672">+</span> (<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Border</span>.<span style="color:#a6e22e">Width</span> <span style="color:#f92672">*</span> <span style="color:#ae81ff">2</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 122</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 123</span><span>							<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">w</span> &lt; <span style="color:#a6e22e">minWidths</span>[<span style="color:#a6e22e">i</span>] {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 124</span><span>								<span style="color:#a6e22e">selfWidth</span> <span style="color:#f92672">-=</span> <span style="color:#a6e22e">minWidths</span>[<span style="color:#a6e22e">i</span>] <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Left</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Right</span> <span style="color:#f92672">+</span> (<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Border</span>.<span style="color:#a6e22e">Width</span> <span style="color:#f92672">*</span> <span style="color:#ae81ff">2</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 125</span><span>								<span style="color:#a6e22e">textTotal</span> <span style="color:#f92672">-=</span> <span style="color:#a6e22e">textCounts</span>[<span style="color:#a6e22e">i</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 126</span><span>								<span style="color:#a6e22e">textCounts</span>[<span style="color:#a6e22e">i</span>] = <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 127</span><span>							}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 128</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 129</span><span>						}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 130</span><span>						<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span>, <span style="color:#a6e22e">v</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 131</span><span>							<span style="color:#a6e22e">vState</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">s</span>[<span style="color:#a6e22e">v</span>.<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 132</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 133</span><span>							<span style="color:#a6e22e">w</span> <span style="color:#f92672">:=</span> ((<span style="color:#a6e22e">selfWidth</span> <span style="color:#f92672">/</span> float32(<span style="color:#a6e22e">textTotal</span>)) <span style="color:#f92672">*</span> float32(<span style="color:#a6e22e">textCounts</span>[<span style="color:#a6e22e">i</span>]))
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 134</span><span>							<span style="color:#a6e22e">w</span> <span style="color:#f92672">-=</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Left</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Right</span> <span style="color:#f92672">+</span> (<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Border</span>.<span style="color:#a6e22e">Width</span> <span style="color:#f92672">*</span> <span style="color:#ae81ff">2</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 135</span><span>							<span style="color:#75715e">// (w!=w) is of NaN
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 136</span><span><span style="color:#75715e"></span>							<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">w</span> &lt; <span style="color:#a6e22e">minWidths</span>[<span style="color:#a6e22e">i</span>] <span style="color:#f92672">||</span> (<span style="color:#a6e22e">w</span> <span style="color:#f92672">!=</span> <span style="color:#a6e22e">w</span>) {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 137</span><span>								<span style="color:#a6e22e">w</span> = <span style="color:#a6e22e">minWidths</span>[<span style="color:#a6e22e">i</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 138</span><span>							}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 139</span><span>							<span style="color:#a6e22e">widths</span> = append(<span style="color:#a6e22e">widths</span>, <span style="color:#a6e22e">w</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 140</span><span>						}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 141</span><span>					}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 142</span><span>					<span style="color:#75715e">// Apply the new widths
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 143</span><span><span style="color:#75715e"></span>					<span style="color:#a6e22e">fState</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">s</span>[<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#ae81ff">0</span>].<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 144</span><span>					<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span>, <span style="color:#a6e22e">v</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 145</span><span>						<span style="color:#a6e22e">vState</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">s</span>[<span style="color:#a6e22e">v</span>.<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 146</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 147</span><span>						<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Width</span> = <span style="color:#a6e22e">widths</span>[<span style="color:#a6e22e">i</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 148</span><span>						<span style="color:#a6e22e">xStore</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">X</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 149</span><span>						<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">i</span> &gt; <span style="color:#ae81ff">0</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 150</span><span>							<span style="color:#a6e22e">sState</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">s</span>[<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#a6e22e">i</span><span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>].<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 151</span><span>							<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">X</span> = <span style="color:#a6e22e">sState</span>.<span style="color:#a6e22e">X</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">sState</span>.<span style="color:#a6e22e">Width</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">sState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Right</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Left</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">sState</span>.<span style="color:#a6e22e">Border</span>.<span style="color:#a6e22e">Width</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Border</span>.<span style="color:#a6e22e">Width</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 152</span><span>							<span style="color:#a6e22e">propagateOffsets</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">v</span>, <span style="color:#a6e22e">xStore</span>, <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Y</span>, <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">X</span>, <span style="color:#a6e22e">fState</span>.<span style="color:#a6e22e">Y</span><span style="color:#f92672">+</span><span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Top</span>, <span style="color:#a6e22e">state</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 153</span><span>						}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 154</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 155</span><span>						<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Y</span> = <span style="color:#a6e22e">fState</span>.<span style="color:#a6e22e">Y</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Top</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 156</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 157</span><span>						(<span style="color:#f92672">*</span><span style="color:#a6e22e">state</span>)[<span style="color:#a6e22e">v</span>.<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>] = <span style="color:#a6e22e">vState</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 158</span><span>						<span style="color:#a6e22e">deInline</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">v</span>, <span style="color:#a6e22e">state</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 159</span><span>						<span style="color:#a6e22e">applyInline</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">v</span>, <span style="color:#a6e22e">state</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 160</span><span>						<span style="color:#a6e22e">applyBlock</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">v</span>, <span style="color:#a6e22e">state</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 161</span><span>						<span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">h</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">getInnerSize</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">v</span>, <span style="color:#a6e22e">state</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 162</span><span>						<span style="color:#a6e22e">h</span> = <span style="color:#a6e22e">utils</span>.<span style="color:#a6e22e">Max</span>(<span style="color:#a6e22e">h</span>, <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Height</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 163</span><span>						<span style="color:#a6e22e">maxH</span> = <span style="color:#a6e22e">utils</span>.<span style="color:#a6e22e">Max</span>(<span style="color:#a6e22e">maxH</span>, <span style="color:#a6e22e">h</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 164</span><span>					}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 165</span><span>					<span style="color:#75715e">// When not wrapping everything will be on the same row
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 166</span><span><span style="color:#75715e"></span>					<span style="color:#a6e22e">rows</span> = append(<span style="color:#a6e22e">rows</span>, []<span style="color:#66d9ef">int</span>{<span style="color:#ae81ff">0</span>, len(<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>), int(<span style="color:#a6e22e">maxH</span>)})
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 167</span><span>				} <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 168</span><span>					<span style="color:#75715e">// Flex Wrapped
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 169</span><span><span style="color:#75715e"></span>					<span style="color:#a6e22e">sum</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">innerSizes</span>[<span style="color:#ae81ff">0</span>][<span style="color:#ae81ff">0</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 170</span><span>					<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">:=</span> <span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">i</span> &lt; len(<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>); <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 171</span><span>						<span style="color:#a6e22e">v</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#a6e22e">i</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 172</span><span>						<span style="color:#a6e22e">vState</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">s</span>[<span style="color:#a6e22e">v</span>.<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 173</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 174</span><span>						<span style="color:#75715e">// if the next plus current will break then
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 175</span><span><span style="color:#75715e"></span>						<span style="color:#a6e22e">w</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">innerSizes</span>[<span style="color:#a6e22e">i</span>][<span style="color:#ae81ff">0</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 176</span><span>						<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">i</span> &gt; <span style="color:#ae81ff">0</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 177</span><span>							<span style="color:#a6e22e">sib</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">s</span>[<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#a6e22e">i</span><span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>].<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 178</span><span>							<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">maxWidths</span>[<span style="color:#a6e22e">i</span>] &gt; <span style="color:#a6e22e">selfWidth</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 179</span><span>								<span style="color:#a6e22e">w</span> = <span style="color:#a6e22e">selfWidth</span> <span style="color:#f92672">-</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Left</span> <span style="color:#f92672">-</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Right</span> <span style="color:#f92672">-</span> (<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Border</span>.<span style="color:#a6e22e">Width</span> <span style="color:#f92672">*</span> <span style="color:#ae81ff">2</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 180</span><span>							}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 181</span><span>							<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">w</span><span style="color:#f92672">+</span><span style="color:#a6e22e">sum</span> &gt; <span style="color:#a6e22e">selfWidth</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 182</span><span>								<span style="color:#a6e22e">sum</span> = <span style="color:#a6e22e">w</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Left</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Right</span> <span style="color:#f92672">+</span> (<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Border</span>.<span style="color:#a6e22e">Width</span> <span style="color:#f92672">*</span> <span style="color:#ae81ff">2</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 183</span><span>							} <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 184</span><span>								<span style="color:#a6e22e">propagateOffsets</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">v</span>, <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">X</span>, <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Y</span>, <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">X</span>, <span style="color:#a6e22e">sib</span>.<span style="color:#a6e22e">Y</span>, <span style="color:#a6e22e">state</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 185</span><span>								<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Y</span> = <span style="color:#a6e22e">sib</span>.<span style="color:#a6e22e">Y</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 186</span><span>								(<span style="color:#f92672">*</span><span style="color:#a6e22e">state</span>)[<span style="color:#a6e22e">v</span>.<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>] = <span style="color:#a6e22e">vState</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 187</span><span>								<span style="color:#a6e22e">sum</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">w</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Left</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Right</span> <span style="color:#f92672">+</span> (<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Border</span>.<span style="color:#a6e22e">Width</span> <span style="color:#f92672">*</span> <span style="color:#ae81ff">2</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 188</span><span>							}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 189</span><span>						}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 190</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 191</span><span>						<span style="color:#a6e22e">widths</span> = append(<span style="color:#a6e22e">widths</span>, <span style="color:#a6e22e">w</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 192</span><span>					}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 193</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 194</span><span>					<span style="color:#75715e">// Move the elements into the correct position
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 195</span><span><span style="color:#75715e"></span>					<span style="color:#a6e22e">start</span> <span style="color:#f92672">:=</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 196</span><span>					<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">prevOffset</span> <span style="color:#66d9ef">float32</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 197</span><span>					<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">:=</span> <span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">i</span> &lt; len(<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>); <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 198</span><span>						<span style="color:#a6e22e">v</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#a6e22e">i</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 199</span><span>						<span style="color:#a6e22e">vState</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">s</span>[<span style="color:#a6e22e">v</span>.<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 200</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 201</span><span>						<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Width</span> = <span style="color:#a6e22e">widths</span>[<span style="color:#a6e22e">i</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 202</span><span>						<span style="color:#a6e22e">xStore</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">X</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 203</span><span>						<span style="color:#a6e22e">yStore</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Y</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 204</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 205</span><span>						<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">i</span> &gt; <span style="color:#ae81ff">0</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 206</span><span>							<span style="color:#a6e22e">sib</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">s</span>[<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#a6e22e">i</span><span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>].<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 207</span><span>							<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Y</span><span style="color:#f92672">+</span><span style="color:#a6e22e">prevOffset</span> <span style="color:#f92672">==</span> <span style="color:#a6e22e">sib</span>.<span style="color:#a6e22e">Y</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 208</span><span>								<span style="color:#a6e22e">yStore</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">prevOffset</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 209</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 210</span><span>								<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Height</span> &lt; <span style="color:#a6e22e">sib</span>.<span style="color:#a6e22e">Height</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 211</span><span>									<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Height</span> = <span style="color:#a6e22e">minHeight</span>(<span style="color:#a6e22e">v</span>, <span style="color:#a6e22e">state</span>, <span style="color:#a6e22e">sib</span>.<span style="color:#a6e22e">Height</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 212</span><span>								}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 213</span><span>								<span style="color:#75715e">// Shift right if on a row with sibling
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 214</span><span><span style="color:#75715e"></span>								<span style="color:#a6e22e">xStore</span> = <span style="color:#a6e22e">sib</span>.<span style="color:#a6e22e">X</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">sib</span>.<span style="color:#a6e22e">Width</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">sib</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Right</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">sib</span>.<span style="color:#a6e22e">Border</span>.<span style="color:#a6e22e">Width</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Left</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Border</span>.<span style="color:#a6e22e">Width</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 215</span><span>							} <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 216</span><span>								<span style="color:#75715e">// Shift under sibling
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 217</span><span><span style="color:#75715e"></span>								<span style="color:#a6e22e">yStore</span> = <span style="color:#a6e22e">sib</span>.<span style="color:#a6e22e">Y</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">sib</span>.<span style="color:#a6e22e">Height</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">sib</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Top</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">sib</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Bottom</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">sib</span>.<span style="color:#a6e22e">Border</span>.<span style="color:#a6e22e">Width</span><span style="color:#f92672">*</span><span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 218</span><span>								<span style="color:#a6e22e">prevOffset</span> = <span style="color:#a6e22e">yStore</span> <span style="color:#f92672">-</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Y</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 219</span><span>								<span style="color:#a6e22e">rows</span> = append(<span style="color:#a6e22e">rows</span>, []<span style="color:#66d9ef">int</span>{<span style="color:#a6e22e">start</span>, <span style="color:#a6e22e">i</span>, int(<span style="color:#a6e22e">maxH</span>)})
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 220</span><span>								<span style="color:#a6e22e">start</span> = <span style="color:#a6e22e">i</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 221</span><span>								<span style="color:#a6e22e">maxH</span> = <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 222</span><span>							}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 223</span><span>							<span style="color:#a6e22e">propagateOffsets</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">v</span>, <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">X</span>, <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Y</span>, <span style="color:#a6e22e">xStore</span>, <span style="color:#a6e22e">yStore</span>, <span style="color:#a6e22e">state</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 224</span><span>						}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 225</span><span>						<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">X</span> = <span style="color:#a6e22e">xStore</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 226</span><span>						<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Y</span> = <span style="color:#a6e22e">yStore</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 227</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 228</span><span>						(<span style="color:#f92672">*</span><span style="color:#a6e22e">state</span>)[<span style="color:#a6e22e">v</span>.<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>] = <span style="color:#a6e22e">vState</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 229</span><span>						<span style="color:#a6e22e">deInline</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">v</span>, <span style="color:#a6e22e">state</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 230</span><span>						<span style="color:#a6e22e">applyInline</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">v</span>, <span style="color:#a6e22e">state</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 231</span><span>						<span style="color:#a6e22e">applyBlock</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">v</span>, <span style="color:#a6e22e">state</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 232</span><span>						<span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">h</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">getInnerSize</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">v</span>, <span style="color:#a6e22e">state</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 233</span><span>						<span style="color:#a6e22e">h</span> = <span style="color:#a6e22e">utils</span>.<span style="color:#a6e22e">Max</span>(<span style="color:#a6e22e">h</span>, <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Height</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 234</span><span>						<span style="color:#a6e22e">maxH</span> = <span style="color:#a6e22e">utils</span>.<span style="color:#a6e22e">Max</span>(<span style="color:#a6e22e">maxH</span>, <span style="color:#a6e22e">h</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 235</span><span>						<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Height</span> = <span style="color:#a6e22e">minHeight</span>(<span style="color:#a6e22e">v</span>, <span style="color:#a6e22e">state</span>, <span style="color:#a6e22e">h</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 236</span><span>						(<span style="color:#f92672">*</span><span style="color:#a6e22e">state</span>)[<span style="color:#a6e22e">v</span>.<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>] = <span style="color:#a6e22e">vState</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 237</span><span>					}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 238</span><span>					<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">start</span> &lt; len(<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>) {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 239</span><span>						<span style="color:#a6e22e">rows</span> = append(<span style="color:#a6e22e">rows</span>, []<span style="color:#66d9ef">int</span>{<span style="color:#a6e22e">start</span>, len(<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>), int(<span style="color:#a6e22e">maxH</span>)})
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 240</span><span>					}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 241</span><span>				}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 242</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 243</span><span>				<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">totalHeight</span> <span style="color:#66d9ef">float32</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 244</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 245</span><span>				<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">v</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">rows</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 246</span><span>					<span style="color:#a6e22e">totalHeight</span> <span style="color:#f92672">+=</span> float32(<span style="color:#a6e22e">v</span>[<span style="color:#ae81ff">2</span>])
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 247</span><span>					<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">v</span>[<span style="color:#ae81ff">0</span>]; <span style="color:#a6e22e">i</span> &lt; <span style="color:#a6e22e">v</span>[<span style="color:#ae81ff">1</span>]; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 248</span><span>						<span style="color:#a6e22e">vState</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">s</span>[<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#a6e22e">i</span>].<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 249</span><span>						<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Height</span> <span style="color:#f92672">==</span> float32(<span style="color:#a6e22e">v</span>[<span style="color:#ae81ff">2</span>]) {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 250</span><span>							<span style="color:#a6e22e">totalHeight</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Top</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Bottom</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 251</span><span>							<span style="color:#a6e22e">v</span>[<span style="color:#ae81ff">2</span>] <span style="color:#f92672">+=</span> int(<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Top</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Bottom</span> <span style="color:#f92672">+</span> (<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Border</span>.<span style="color:#a6e22e">Width</span> <span style="color:#f92672">*</span> <span style="color:#ae81ff">2</span>))
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 252</span><span>						}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 253</span><span>					}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 254</span><span>				}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 255</span><span>				<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">yOffset</span> <span style="color:#66d9ef">float32</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 256</span><span>				<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">v</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">rows</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 257</span><span>					<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">v</span>[<span style="color:#ae81ff">0</span>]; <span style="color:#a6e22e">i</span> &lt; <span style="color:#a6e22e">v</span>[<span style="color:#ae81ff">1</span>]; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 258</span><span>						<span style="color:#a6e22e">vState</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">s</span>[<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#a6e22e">i</span>].<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 259</span><span>						<span style="color:#75715e">// height := float32(v[2])
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 260</span><span><span style="color:#75715e"></span>						<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#a6e22e">i</span>].<span style="color:#a6e22e">Style</span>[<span style="color:#e6db74">&#34;height&#34;</span>] <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;&#34;</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#a6e22e">i</span>].<span style="color:#a6e22e">Style</span>[<span style="color:#e6db74">&#34;min-height&#34;</span>] <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;&#34;</span> <span style="color:#f92672">&amp;&amp;</span> !<span style="color:#a6e22e">flexWrapped</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 261</span><span>							<span style="color:#a6e22e">height</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">Height</span> <span style="color:#f92672">-</span> <span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">Padding</span>.<span style="color:#a6e22e">Top</span> <span style="color:#f92672">-</span> <span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">Padding</span>.<span style="color:#a6e22e">Bottom</span> <span style="color:#f92672">-</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Top</span> <span style="color:#f92672">-</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Bottom</span> <span style="color:#f92672">-</span> (<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Border</span>.<span style="color:#a6e22e">Width</span> <span style="color:#f92672">*</span> <span style="color:#ae81ff">2</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 262</span><span>							<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Height</span> = <span style="color:#a6e22e">minHeight</span>(<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#a6e22e">i</span>], <span style="color:#a6e22e">state</span>, <span style="color:#a6e22e">height</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 263</span><span>						} <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">flexWrapped</span> <span style="color:#f92672">&amp;&amp;</span> (<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Style</span>[<span style="color:#e6db74">&#34;height&#34;</span>] <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#34;&#34;</span> <span style="color:#f92672">||</span> <span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Style</span>[<span style="color:#e6db74">&#34;min-height&#34;</span>] <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#34;&#34;</span>) {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 264</span><span>							<span style="color:#a6e22e">height</span> <span style="color:#f92672">:=</span> ((<span style="color:#a6e22e">selfHeight</span> <span style="color:#f92672">/</span> <span style="color:#a6e22e">totalHeight</span>) <span style="color:#f92672">*</span> float32(<span style="color:#a6e22e">v</span>[<span style="color:#ae81ff">2</span>])) <span style="color:#f92672">-</span> (<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Top</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Bottom</span> <span style="color:#f92672">+</span> (<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Border</span>.<span style="color:#a6e22e">Width</span> <span style="color:#f92672">*</span> <span style="color:#ae81ff">2</span>))
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 265</span><span>							<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Height</span> = <span style="color:#a6e22e">minHeight</span>(<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#a6e22e">i</span>], <span style="color:#a6e22e">state</span>, <span style="color:#a6e22e">height</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 266</span><span>							<span style="color:#a6e22e">yStore</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Y</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 267</span><span>							<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Y</span> = <span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">Y</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">Padding</span>.<span style="color:#a6e22e">Top</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">yOffset</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Top</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Border</span>.<span style="color:#a6e22e">Width</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 268</span><span>							<span style="color:#a6e22e">propagateOffsets</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#a6e22e">i</span>], <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">X</span>, <span style="color:#a6e22e">yStore</span>, <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">X</span>, <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Y</span>, <span style="color:#a6e22e">state</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 269</span><span>						} <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">flexWrapped</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 270</span><span>							<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Height</span><span style="color:#f92672">+</span><span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Top</span><span style="color:#f92672">+</span><span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Bottom</span><span style="color:#f92672">+</span>(<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Border</span>.<span style="color:#a6e22e">Width</span><span style="color:#f92672">*</span><span style="color:#ae81ff">2</span>) <span style="color:#f92672">!=</span> float32(<span style="color:#a6e22e">v</span>[<span style="color:#ae81ff">2</span>]) {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 271</span><span>								<span style="color:#a6e22e">height</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Height</span> <span style="color:#f92672">-</span> (<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Top</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Bottom</span> <span style="color:#f92672">+</span> (<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Border</span>.<span style="color:#a6e22e">Width</span> <span style="color:#f92672">*</span> <span style="color:#ae81ff">2</span>))
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 272</span><span>								<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Height</span> = <span style="color:#a6e22e">minHeight</span>(<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#a6e22e">i</span>], <span style="color:#a6e22e">state</span>, <span style="color:#a6e22e">height</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 273</span><span>							}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 274</span><span>							<span style="color:#a6e22e">yStore</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Y</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 275</span><span>							<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Y</span> = <span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">Y</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">Padding</span>.<span style="color:#a6e22e">Top</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">yOffset</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Top</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Border</span>.<span style="color:#a6e22e">Width</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 276</span><span>							<span style="color:#a6e22e">propagateOffsets</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#a6e22e">i</span>], <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">X</span>, <span style="color:#a6e22e">yStore</span>, <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">X</span>, <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Y</span>, <span style="color:#a6e22e">state</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 277</span><span>						}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 278</span><span>						(<span style="color:#f92672">*</span><span style="color:#a6e22e">state</span>)[<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#a6e22e">i</span>].<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>] = <span style="color:#a6e22e">vState</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 279</span><span>					}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 280</span><span>					<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">flexWrapped</span> <span style="color:#f92672">&amp;&amp;</span> (<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Style</span>[<span style="color:#e6db74">&#34;height&#34;</span>] <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#34;&#34;</span> <span style="color:#f92672">||</span> <span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Style</span>[<span style="color:#e6db74">&#34;min-height&#34;</span>] <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#34;&#34;</span>) {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 281</span><span>						<span style="color:#a6e22e">yOffset</span> <span style="color:#f92672">+=</span> ((<span style="color:#a6e22e">selfHeight</span> <span style="color:#f92672">/</span> <span style="color:#a6e22e">totalHeight</span>) <span style="color:#f92672">*</span> float32(<span style="color:#a6e22e">v</span>[<span style="color:#ae81ff">2</span>]))
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 282</span><span>					} <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">flexWrapped</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 283</span><span>						<span style="color:#a6e22e">yOffset</span> <span style="color:#f92672">+=</span> float32(<span style="color:#a6e22e">v</span>[<span style="color:#ae81ff">2</span>])
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 284</span><span>					}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 285</span><span>				}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 286</span><span>				<span style="color:#75715e">// Reverse elements
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 287</span><span><span style="color:#75715e"></span>				<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">flexReversed</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 288</span><span>					<span style="color:#a6e22e">rowReverse</span>(<span style="color:#a6e22e">rows</span>, <span style="color:#a6e22e">n</span>, <span style="color:#a6e22e">state</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 289</span><span>				}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 290</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 291</span><span>				<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">justifyContent</span> <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#34;&#34;</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#a6e22e">justifyContent</span> <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#34;normal&#34;</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 292</span><span>					<span style="color:#a6e22e">justifyRow</span>(<span style="color:#a6e22e">rows</span>, <span style="color:#a6e22e">n</span>, <span style="color:#a6e22e">state</span>, <span style="color:#a6e22e">justifyContent</span>, <span style="color:#a6e22e">flexReversed</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 293</span><span>				}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 294</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 295</span><span>				<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">alignContent</span> <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#34;normal&#34;</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#a6e22e">flexWrapped</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 296</span><span>					<span style="color:#a6e22e">alignRow</span>(<span style="color:#a6e22e">rows</span>, <span style="color:#a6e22e">n</span>, <span style="color:#a6e22e">state</span>, <span style="color:#a6e22e">alignItems</span>, <span style="color:#a6e22e">alignContent</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 297</span><span>				}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 298</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 299</span><span>			}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 300</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 301</span><span>			<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">flexDirection</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;column&#34;</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 302</span><span>				<span style="color:#66d9ef">if</span> !<span style="color:#a6e22e">flexWrapped</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 303</span><span>					<span style="color:#75715e">// if the container has a size restriction
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 304</span><span><span style="color:#75715e"></span>					<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">totalHeight</span>, <span style="color:#a6e22e">maxH</span> <span style="color:#66d9ef">float32</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 305</span><span>					<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">fixedHeightElements</span> <span style="color:#66d9ef">int</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 306</span><span>					<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span>, <span style="color:#a6e22e">v</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 307</span><span>						<span style="color:#a6e22e">vState</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">s</span>[<span style="color:#a6e22e">v</span>.<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 308</span><span>						<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">v</span>.<span style="color:#a6e22e">Style</span>[<span style="color:#e6db74">&#34;min-height&#34;</span>] <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#34;&#34;</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 309</span><span>							<span style="color:#a6e22e">selfHeight</span> <span style="color:#f92672">-=</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Height</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Top</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Bottom</span> <span style="color:#f92672">+</span> (<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Border</span>.<span style="color:#a6e22e">Width</span> <span style="color:#f92672">*</span> <span style="color:#ae81ff">2</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 310</span><span>							<span style="color:#a6e22e">fixedHeightElements</span><span style="color:#f92672">++</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 311</span><span>							<span style="color:#a6e22e">maxH</span> = <span style="color:#a6e22e">utils</span>.<span style="color:#a6e22e">Max</span>(<span style="color:#a6e22e">maxH</span>, <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Height</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 312</span><span>						} <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 313</span><span>							<span style="color:#75715e">// accoutn for element min height
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 314</span><span><span style="color:#75715e"></span>							<span style="color:#a6e22e">totalHeight</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">minHeights</span>[<span style="color:#a6e22e">i</span>] <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Top</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Bottom</span> <span style="color:#f92672">+</span> (<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Border</span>.<span style="color:#a6e22e">Width</span> <span style="color:#f92672">*</span> <span style="color:#ae81ff">2</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 315</span><span>							<span style="color:#a6e22e">maxH</span> = <span style="color:#a6e22e">utils</span>.<span style="color:#a6e22e">Max</span>(<span style="color:#a6e22e">maxH</span>, <span style="color:#a6e22e">minHeights</span>[<span style="color:#a6e22e">i</span>])
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 316</span><span>						}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 317</span><span>					}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 318</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 319</span><span>					<span style="color:#a6e22e">heightDelta</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">selfHeight</span> <span style="color:#f92672">-</span> <span style="color:#a6e22e">totalHeight</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 320</span><span>					<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">heightDelta</span> &lt; <span style="color:#ae81ff">0</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 321</span><span>						<span style="color:#a6e22e">heightDelta</span> = <span style="color:#f92672">-</span><span style="color:#a6e22e">heightDelta</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 322</span><span>					}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 323</span><span>					<span style="color:#a6e22e">heightAdj</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">heightDelta</span> <span style="color:#f92672">/</span> float32(len(<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>)<span style="color:#f92672">-</span><span style="color:#a6e22e">fixedHeightElements</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 324</span><span>					<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">heightAdj</span> &lt; <span style="color:#ae81ff">0</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 325</span><span>						<span style="color:#a6e22e">heightAdj</span> = <span style="color:#f92672">-</span><span style="color:#a6e22e">heightAdj</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 326</span><span>					}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 327</span><span>					<span style="color:#75715e">// We are calculating the amount a element needs to shrink because of its siblings
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 328</span><span><span style="color:#75715e"></span>					<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span>, <span style="color:#a6e22e">v</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 329</span><span>						<span style="color:#a6e22e">vState</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">s</span>[<span style="color:#a6e22e">v</span>.<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 330</span><span>						<span style="color:#a6e22e">yStore</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Y</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 331</span><span>						<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Height</span> = <span style="color:#a6e22e">setHeight</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">v</span>, <span style="color:#a6e22e">state</span>, <span style="color:#a6e22e">minHeights</span>[<span style="color:#a6e22e">i</span>]<span style="color:#f92672">-</span><span style="color:#a6e22e">heightAdj</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 332</span><span>						<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">i</span> &gt; <span style="color:#ae81ff">0</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 333</span><span>							<span style="color:#a6e22e">sib</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">s</span>[<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#a6e22e">i</span><span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>].<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 334</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 335</span><span>							<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Y</span> = <span style="color:#a6e22e">sib</span>.<span style="color:#a6e22e">Y</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">sib</span>.<span style="color:#a6e22e">Height</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">sib</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Bottom</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">sib</span>.<span style="color:#a6e22e">Border</span>.<span style="color:#a6e22e">Width</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Top</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Border</span>.<span style="color:#a6e22e">Width</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 336</span><span>						}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 337</span><span>						<span style="color:#a6e22e">propagateOffsets</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">v</span>, <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">X</span>, <span style="color:#a6e22e">yStore</span>, <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">X</span>, <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Y</span>, <span style="color:#a6e22e">state</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 338</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 339</span><span>						(<span style="color:#f92672">*</span><span style="color:#a6e22e">state</span>)[<span style="color:#a6e22e">v</span>.<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>] = <span style="color:#a6e22e">vState</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 340</span><span>					}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 341</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 342</span><span>					<span style="color:#a6e22e">rows</span> = append(<span style="color:#a6e22e">rows</span>, []<span style="color:#66d9ef">int</span>{<span style="color:#ae81ff">0</span>, len(<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>) <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>, int(<span style="color:#a6e22e">maxH</span>)})
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 343</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 344</span><span>				} <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 345</span><span>					<span style="color:#75715e">// need to redo this, with col wrap make each row the width of the longest element unless set otherwise (width, max-width) get width with min-width
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 346</span><span><span style="color:#75715e"></span>					<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">colHeight</span> <span style="color:#66d9ef">float32</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 347</span><span>					<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">colIndex</span> <span style="color:#66d9ef">int</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 348</span><span>					<span style="color:#a6e22e">cols</span> <span style="color:#f92672">:=</span> [][][]<span style="color:#66d9ef">float32</span>{}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 349</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 350</span><span>					<span style="color:#75715e">// Map elements to columns
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 351</span><span><span style="color:#75715e"></span>					<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span>, <span style="color:#a6e22e">v</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 352</span><span>						<span style="color:#a6e22e">vState</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">s</span>[<span style="color:#a6e22e">v</span>.<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 353</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 354</span><span>						<span style="color:#a6e22e">height</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Height</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Top</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Bottom</span> <span style="color:#f92672">+</span> (<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Border</span>.<span style="color:#a6e22e">Width</span> <span style="color:#f92672">*</span> <span style="color:#ae81ff">2</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 355</span><span>						<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">colHeight</span><span style="color:#f92672">+</span><span style="color:#a6e22e">height</span> &gt; <span style="color:#a6e22e">selfHeight</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 356</span><span>							<span style="color:#a6e22e">colHeight</span> = <span style="color:#a6e22e">height</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 357</span><span>							<span style="color:#a6e22e">colIndex</span><span style="color:#f92672">++</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 358</span><span>							<span style="color:#a6e22e">width</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Left</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Right</span> <span style="color:#f92672">+</span> (<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Border</span>.<span style="color:#a6e22e">Width</span> <span style="color:#f92672">*</span> <span style="color:#ae81ff">2</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 359</span><span>							<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">colIndex</span> <span style="color:#f92672">&gt;=</span> len(<span style="color:#a6e22e">cols</span>) {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 360</span><span>								<span style="color:#a6e22e">cols</span> = append(<span style="color:#a6e22e">cols</span>, [][]<span style="color:#66d9ef">float32</span>{})
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 361</span><span>							}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 362</span><span>							<span style="color:#a6e22e">cols</span>[<span style="color:#a6e22e">colIndex</span>] = append(<span style="color:#a6e22e">cols</span>[<span style="color:#a6e22e">colIndex</span>], []<span style="color:#66d9ef">float32</span>{float32(<span style="color:#a6e22e">i</span>), <span style="color:#a6e22e">height</span>, <span style="color:#a6e22e">width</span>})
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 363</span><span>						} <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 364</span><span>							<span style="color:#a6e22e">colHeight</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">height</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 365</span><span>							<span style="color:#a6e22e">width</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Left</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Right</span> <span style="color:#f92672">+</span> (<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Border</span>.<span style="color:#a6e22e">Width</span> <span style="color:#f92672">*</span> <span style="color:#ae81ff">2</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 366</span><span>							<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">colIndex</span> <span style="color:#f92672">&gt;=</span> len(<span style="color:#a6e22e">cols</span>) {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 367</span><span>								<span style="color:#a6e22e">cols</span> = append(<span style="color:#a6e22e">cols</span>, [][]<span style="color:#66d9ef">float32</span>{})
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 368</span><span>							}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 369</span><span>							<span style="color:#a6e22e">cols</span>[<span style="color:#a6e22e">colIndex</span>] = append(<span style="color:#a6e22e">cols</span>[<span style="color:#a6e22e">colIndex</span>], []<span style="color:#66d9ef">float32</span>{float32(<span style="color:#a6e22e">i</span>), <span style="color:#a6e22e">height</span>, <span style="color:#a6e22e">width</span>})
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 370</span><span>						}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 371</span><span>					}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 372</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 373</span><span>					<span style="color:#75715e">// Find the max total width of all columns
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 374</span><span><span style="color:#75715e"></span>					<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">totalMaxWidth</span> <span style="color:#66d9ef">float32</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 375</span><span>					<span style="color:#a6e22e">maxWidths</span> <span style="color:#f92672">:=</span> []<span style="color:#66d9ef">float32</span>{}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 376</span><span>					<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">col</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">cols</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 377</span><span>						<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">maxWidth</span>, <span style="color:#a6e22e">maxHeight</span> <span style="color:#66d9ef">float32</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 378</span><span>						<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">element</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">col</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 379</span><span>							<span style="color:#a6e22e">maxHeight</span> = <span style="color:#a6e22e">utils</span>.<span style="color:#a6e22e">Max</span>(<span style="color:#a6e22e">utils</span>.<span style="color:#a6e22e">Max</span>(<span style="color:#a6e22e">element</span>[<span style="color:#ae81ff">1</span>], <span style="color:#a6e22e">minHeights</span>[int(<span style="color:#a6e22e">element</span>[<span style="color:#ae81ff">0</span>])]), <span style="color:#a6e22e">maxHeight</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 380</span><span>							<span style="color:#a6e22e">maxWidth</span> = <span style="color:#a6e22e">utils</span>.<span style="color:#a6e22e">Max</span>(<span style="color:#a6e22e">element</span>[<span style="color:#ae81ff">2</span>], <span style="color:#a6e22e">maxWidth</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 381</span><span>						}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 382</span><span>						<span style="color:#a6e22e">rows</span> = append(<span style="color:#a6e22e">rows</span>, []<span style="color:#66d9ef">int</span>{int(<span style="color:#a6e22e">col</span>[<span style="color:#ae81ff">0</span>][<span style="color:#ae81ff">0</span>]), int(<span style="color:#a6e22e">col</span>[len(<span style="color:#a6e22e">col</span>)<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>][<span style="color:#ae81ff">0</span>]), int(<span style="color:#a6e22e">maxHeight</span>)})
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 383</span><span>						<span style="color:#a6e22e">totalMaxWidth</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">maxWidth</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 384</span><span>						<span style="color:#a6e22e">maxWidths</span> = append(<span style="color:#a6e22e">maxWidths</span>, <span style="color:#a6e22e">maxWidth</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 385</span><span>					}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 386</span><span>					<span style="color:#a6e22e">offset</span> <span style="color:#f92672">:=</span> (<span style="color:#a6e22e">selfWidth</span> <span style="color:#f92672">-</span> <span style="color:#a6e22e">totalMaxWidth</span>) <span style="color:#f92672">/</span> float32(len(<span style="color:#a6e22e">cols</span>))
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 387</span><span>					<span style="color:#75715e">// Move the elements into the correct position
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 388</span><span><span style="color:#75715e"></span>					<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">xOffset</span> <span style="color:#66d9ef">float32</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 389</span><span>					<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span>, <span style="color:#a6e22e">col</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">cols</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 390</span><span>						<span style="color:#75715e">// Move the elements into the correct position
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 391</span><span><span style="color:#75715e"></span>						<span style="color:#a6e22e">yOffset</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">Y</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">Border</span>.<span style="color:#a6e22e">Width</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">Padding</span>.<span style="color:#a6e22e">Top</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 392</span><span>						<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">element</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">col</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 393</span><span>							<span style="color:#a6e22e">v</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>[int(<span style="color:#a6e22e">element</span>[<span style="color:#ae81ff">0</span>])]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 394</span><span>							<span style="color:#a6e22e">vState</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">s</span>[<span style="color:#a6e22e">v</span>.<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 395</span><span>							<span style="color:#a6e22e">xStore</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">X</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 396</span><span>							<span style="color:#a6e22e">yStore</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Y</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 397</span><span>							<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">X</span> = <span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">X</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">Padding</span>.<span style="color:#a6e22e">Left</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">Border</span>.<span style="color:#a6e22e">Width</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">xOffset</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Left</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Border</span>.<span style="color:#a6e22e">Width</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 398</span><span>							<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Y</span> = <span style="color:#a6e22e">yOffset</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Top</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Border</span>.<span style="color:#a6e22e">Width</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 399</span><span>							<span style="color:#a6e22e">propagateOffsets</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">v</span>, <span style="color:#a6e22e">xStore</span>, <span style="color:#a6e22e">yStore</span>, <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">X</span>, <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Y</span>, <span style="color:#a6e22e">state</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 400</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 401</span><span>							<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Width</span> = <span style="color:#a6e22e">setWidth</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">v</span>, <span style="color:#a6e22e">state</span>, (<span style="color:#a6e22e">maxWidths</span>[<span style="color:#a6e22e">i</span>]<span style="color:#f92672">+</span><span style="color:#a6e22e">offset</span>)<span style="color:#f92672">-</span>(<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Left</span><span style="color:#f92672">+</span><span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Right</span><span style="color:#f92672">+</span>(<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Border</span>.<span style="color:#a6e22e">Width</span><span style="color:#f92672">*</span><span style="color:#ae81ff">2</span>)))
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 402</span><span>							<span style="color:#a6e22e">yOffset</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Top</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Border</span>.<span style="color:#a6e22e">Width</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Height</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Bottom</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Border</span>.<span style="color:#a6e22e">Width</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 403</span><span>							(<span style="color:#f92672">*</span><span style="color:#a6e22e">state</span>)[<span style="color:#a6e22e">v</span>.<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>] = <span style="color:#a6e22e">vState</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 404</span><span>						}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 405</span><span>						<span style="color:#a6e22e">xOffset</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">maxWidths</span>[<span style="color:#a6e22e">i</span>] <span style="color:#f92672">+</span> <span style="color:#a6e22e">offset</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 406</span><span>					}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 407</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 408</span><span>				}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 409</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 410</span><span>				<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">flexReversed</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 411</span><span>					<span style="color:#a6e22e">colReverse</span>(<span style="color:#a6e22e">rows</span>, <span style="color:#a6e22e">n</span>, <span style="color:#a6e22e">state</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 412</span><span>				}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 413</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 414</span><span>				<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">justifyContent</span> <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#34;normal&#34;</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 415</span><span>					<span style="color:#a6e22e">justifyCols</span>(<span style="color:#a6e22e">rows</span>, <span style="color:#a6e22e">n</span>, <span style="color:#a6e22e">state</span>, <span style="color:#a6e22e">justifyContent</span>, <span style="color:#a6e22e">flexReversed</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 416</span><span>				}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 417</span><span>				<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">alignContent</span> <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#34;normal&#34;</span> <span style="color:#f92672">||</span> <span style="color:#a6e22e">alignItems</span> <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#34;normal&#34;</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 418</span><span>					<span style="color:#a6e22e">alignCols</span>(<span style="color:#a6e22e">rows</span>, <span style="color:#a6e22e">n</span>, <span style="color:#a6e22e">state</span>, <span style="color:#a6e22e">alignItems</span>, <span style="color:#a6e22e">alignContent</span>, <span style="color:#a6e22e">innerSizes</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 419</span><span>				}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 420</span><span>			}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 421</span><span>			<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Style</span>[<span style="color:#e6db74">&#34;height&#34;</span>] <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;&#34;</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Style</span>[<span style="color:#e6db74">&#34;min-height&#34;</span>] <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;&#34;</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 422</span><span>				<span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">h</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">getInnerSize</span>(<span style="color:#a6e22e">n</span>, <span style="color:#a6e22e">state</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 423</span><span>				<span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">Height</span> = <span style="color:#a6e22e">h</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 424</span><span>			}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 425</span><span>			(<span style="color:#f92672">*</span><span style="color:#a6e22e">state</span>)[<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>] = <span style="color:#a6e22e">self</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 426</span><span>		},
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 427</span><span>	}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 428</span><span>}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 429</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 430</span><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">applyBlock</span>(<span style="color:#a6e22e">n</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">element</span>.<span style="color:#a6e22e">Node</span>, <span style="color:#a6e22e">state</span> <span style="color:#f92672">*</span><span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#a6e22e">element</span>.<span style="color:#a6e22e">State</span>) {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 431</span><span>	<span style="color:#66d9ef">if</span> len(<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>) &gt; <span style="color:#ae81ff">0</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 432</span><span>		<span style="color:#a6e22e">accum</span> <span style="color:#f92672">:=</span> float32(<span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 433</span><span>		<span style="color:#a6e22e">inlineOffset</span> <span style="color:#f92672">:=</span> float32(<span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 434</span><span>		<span style="color:#a6e22e">s</span> <span style="color:#f92672">:=</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">state</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 435</span><span>		<span style="color:#a6e22e">lastHeight</span> <span style="color:#f92672">:=</span> float32(<span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 436</span><span>		<span style="color:#a6e22e">baseY</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">s</span>[<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#ae81ff">0</span>].<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>].<span style="color:#a6e22e">Y</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 437</span><span>		<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">:=</span> <span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">i</span> &lt; len(<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>); <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 438</span><span>			<span style="color:#a6e22e">v</span> <span style="color:#f92672">:=</span> <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#a6e22e">i</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 439</span><span>			<span style="color:#a6e22e">vState</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">s</span>[<span style="color:#a6e22e">v</span>.<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 440</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 441</span><span>			<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">v</span>.<span style="color:#a6e22e">Style</span>[<span style="color:#e6db74">&#34;display&#34;</span>] <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#34;block&#34;</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 442</span><span>				<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Y</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">inlineOffset</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 443</span><span>				<span style="color:#a6e22e">accum</span> = (<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Y</span> <span style="color:#f92672">-</span> <span style="color:#a6e22e">baseY</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 444</span><span>				<span style="color:#a6e22e">lastHeight</span> = <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Height</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 445</span><span>			} <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">v</span>.<span style="color:#a6e22e">Style</span>[<span style="color:#e6db74">&#34;position&#34;</span>] <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#34;absolute&#34;</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 446</span><span>				<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Y</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">accum</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 447</span><span>				<span style="color:#a6e22e">inlineOffset</span> <span style="color:#f92672">+=</span> (<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Height</span> <span style="color:#f92672">+</span> (<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Border</span>.<span style="color:#a6e22e">Width</span> <span style="color:#f92672">*</span> <span style="color:#ae81ff">2</span>) <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Top</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Bottom</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Padding</span>.<span style="color:#a6e22e">Top</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Padding</span>.<span style="color:#a6e22e">Bottom</span>) <span style="color:#f92672">+</span> <span style="color:#a6e22e">lastHeight</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 448</span><span>			}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 449</span><span>			(<span style="color:#f92672">*</span><span style="color:#a6e22e">state</span>)[<span style="color:#a6e22e">v</span>.<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>] = <span style="color:#a6e22e">vState</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 450</span><span>		}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 451</span><span>	}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 452</span><span>}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 453</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 454</span><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">deInline</span>(<span style="color:#a6e22e">n</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">element</span>.<span style="color:#a6e22e">Node</span>, <span style="color:#a6e22e">state</span> <span style="color:#f92672">*</span><span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#a6e22e">element</span>.<span style="color:#a6e22e">State</span>) {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 455</span><span>	<span style="color:#a6e22e">s</span> <span style="color:#f92672">:=</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">state</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 456</span><span>	<span style="color:#75715e">// self := s[n.Properties.Id]
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 457</span><span><span style="color:#75715e"></span>	<span style="color:#a6e22e">baseX</span> <span style="color:#f92672">:=</span> float32(<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 458</span><span>	<span style="color:#a6e22e">baseY</span> <span style="color:#f92672">:=</span> float32(<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 459</span><span>	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">v</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 460</span><span>		<span style="color:#a6e22e">vState</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">s</span>[<span style="color:#a6e22e">v</span>.<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 461</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 462</span><span>		<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">v</span>.<span style="color:#a6e22e">Style</span>[<span style="color:#e6db74">&#34;display&#34;</span>] <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;inline&#34;</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 463</span><span>			<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">baseX</span> &lt; <span style="color:#ae81ff">0</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#a6e22e">baseY</span> &lt; <span style="color:#ae81ff">0</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 464</span><span>				<span style="color:#a6e22e">baseX</span> = <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">X</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 465</span><span>				<span style="color:#a6e22e">baseY</span> = <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Y</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 466</span><span>			} <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 467</span><span>				<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">X</span> = <span style="color:#a6e22e">baseX</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 468</span><span>				<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Y</span> = <span style="color:#a6e22e">baseY</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 469</span><span>				(<span style="color:#f92672">*</span><span style="color:#a6e22e">state</span>)[<span style="color:#a6e22e">v</span>.<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>] = <span style="color:#a6e22e">vState</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 470</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 471</span><span>			}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 472</span><span>		} <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 473</span><span>			<span style="color:#a6e22e">baseX</span> = float32(<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 474</span><span>			<span style="color:#a6e22e">baseY</span> = float32(<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 475</span><span>		}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 476</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 477</span><span>		<span style="color:#66d9ef">if</span> len(<span style="color:#a6e22e">v</span>.<span style="color:#a6e22e">Children</span>) &gt; <span style="color:#ae81ff">0</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 478</span><span>			<span style="color:#a6e22e">deInline</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">v</span>, <span style="color:#a6e22e">state</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 479</span><span>		}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 480</span><span>	}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 481</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 482</span><span>}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 483</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 484</span><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">applyInline</span>(<span style="color:#a6e22e">n</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">element</span>.<span style="color:#a6e22e">Node</span>, <span style="color:#a6e22e">state</span> <span style="color:#f92672">*</span><span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#a6e22e">element</span>.<span style="color:#a6e22e">State</span>) {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 485</span><span>	<span style="color:#a6e22e">pl</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">inline</span>.<span style="color:#a6e22e">Init</span>()
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 486</span><span>	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">:=</span> <span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">i</span> &lt; len(<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>); <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 487</span><span>		<span style="color:#a6e22e">v</span> <span style="color:#f92672">:=</span> <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#a6e22e">i</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 488</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 489</span><span>		<span style="color:#66d9ef">if</span> len(<span style="color:#a6e22e">v</span>.<span style="color:#a6e22e">Children</span>) &gt; <span style="color:#ae81ff">0</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 490</span><span>			<span style="color:#a6e22e">applyInline</span>(<span style="color:#a6e22e">v</span>, <span style="color:#a6e22e">state</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 491</span><span>		}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 492</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 493</span><span>		<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">pl</span>.<span style="color:#a6e22e">Selector</span>(<span style="color:#a6e22e">v</span>) {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 494</span><span>			<span style="color:#a6e22e">pl</span>.<span style="color:#a6e22e">Handler</span>(<span style="color:#a6e22e">v</span>, <span style="color:#a6e22e">state</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 495</span><span>		}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 496</span><span>	}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 497</span><span>}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 498</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 499</span><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">propagateOffsets</span>(<span style="color:#a6e22e">n</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">element</span>.<span style="color:#a6e22e">Node</span>, <span style="color:#a6e22e">prevx</span>, <span style="color:#a6e22e">prevy</span>, <span style="color:#a6e22e">newx</span>, <span style="color:#a6e22e">newy</span> <span style="color:#66d9ef">float32</span>, <span style="color:#a6e22e">state</span> <span style="color:#f92672">*</span><span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#a6e22e">element</span>.<span style="color:#a6e22e">State</span>) {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 500</span><span>	<span style="color:#a6e22e">s</span> <span style="color:#f92672">:=</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">state</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 501</span><span>	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">v</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 502</span><span>		<span style="color:#a6e22e">vState</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">s</span>[<span style="color:#a6e22e">v</span>.<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 503</span><span>		<span style="color:#a6e22e">xStore</span> <span style="color:#f92672">:=</span> (<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">X</span> <span style="color:#f92672">-</span> <span style="color:#a6e22e">prevx</span>) <span style="color:#f92672">+</span> <span style="color:#a6e22e">newx</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 504</span><span>		<span style="color:#a6e22e">yStore</span> <span style="color:#f92672">:=</span> (<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Y</span> <span style="color:#f92672">-</span> <span style="color:#a6e22e">prevy</span>) <span style="color:#f92672">+</span> <span style="color:#a6e22e">newy</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 505</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 506</span><span>		<span style="color:#66d9ef">if</span> len(<span style="color:#a6e22e">v</span>.<span style="color:#a6e22e">Children</span>) &gt; <span style="color:#ae81ff">0</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 507</span><span>			<span style="color:#a6e22e">propagateOffsets</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">v</span>, <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">X</span>, <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Y</span>, <span style="color:#a6e22e">xStore</span>, <span style="color:#a6e22e">yStore</span>, <span style="color:#a6e22e">state</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 508</span><span>		}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 509</span><span>		<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">X</span> = <span style="color:#a6e22e">xStore</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 510</span><span>		<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Y</span> = <span style="color:#a6e22e">yStore</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 511</span><span>		(<span style="color:#f92672">*</span><span style="color:#a6e22e">state</span>)[<span style="color:#a6e22e">v</span>.<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>] = <span style="color:#a6e22e">vState</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 512</span><span>	}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 513</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 514</span><span>}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 515</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 516</span><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">countText</span>(<span style="color:#a6e22e">n</span> <span style="color:#a6e22e">element</span>.<span style="color:#a6e22e">Node</span>) <span style="color:#66d9ef">int</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 517</span><span>	<span style="color:#a6e22e">count</span> <span style="color:#f92672">:=</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 518</span><span>	<span style="color:#a6e22e">groups</span> <span style="color:#f92672">:=</span> []<span style="color:#66d9ef">int</span>{}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 519</span><span>	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">v</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 520</span><span>		<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">v</span>.<span style="color:#a6e22e">TagName</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;notaspan&#34;</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 521</span><span>			<span style="color:#a6e22e">count</span> <span style="color:#f92672">+=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 522</span><span>		}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 523</span><span>		<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">v</span>.<span style="color:#a6e22e">Style</span>[<span style="color:#e6db74">&#34;display&#34;</span>] <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;block&#34;</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 524</span><span>			<span style="color:#a6e22e">groups</span> = append(<span style="color:#a6e22e">groups</span>, <span style="color:#a6e22e">count</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 525</span><span>			<span style="color:#a6e22e">count</span> = <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 526</span><span>		}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 527</span><span>		<span style="color:#66d9ef">if</span> len(<span style="color:#a6e22e">v</span>.<span style="color:#a6e22e">Children</span>) &gt; <span style="color:#ae81ff">0</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 528</span><span>			<span style="color:#a6e22e">count</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">countText</span>(<span style="color:#a6e22e">v</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 529</span><span>		}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 530</span><span>	}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 531</span><span>	<span style="color:#a6e22e">groups</span> = append(<span style="color:#a6e22e">groups</span>, <span style="color:#a6e22e">count</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 532</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 533</span><span>	<span style="color:#a6e22e">sort</span>.<span style="color:#a6e22e">Slice</span>(<span style="color:#a6e22e">groups</span>, <span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">i</span>, <span style="color:#a6e22e">j</span> <span style="color:#66d9ef">int</span>) <span style="color:#66d9ef">bool</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 534</span><span>		<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">groups</span>[<span style="color:#a6e22e">i</span>] &gt; <span style="color:#a6e22e">groups</span>[<span style="color:#a6e22e">j</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 535</span><span>	})
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 536</span><span>	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">groups</span>[<span style="color:#ae81ff">0</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 537</span><span>}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 538</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 539</span><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">minHeight</span>(<span style="color:#a6e22e">n</span> <span style="color:#a6e22e">element</span>.<span style="color:#a6e22e">Node</span>, <span style="color:#a6e22e">state</span> <span style="color:#f92672">*</span><span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#a6e22e">element</span>.<span style="color:#a6e22e">State</span>, <span style="color:#a6e22e">prev</span> <span style="color:#66d9ef">float32</span>) <span style="color:#66d9ef">float32</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 540</span><span>	<span style="color:#a6e22e">s</span> <span style="color:#f92672">:=</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">state</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 541</span><span>	<span style="color:#a6e22e">self</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">s</span>[<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 542</span><span>	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Style</span>[<span style="color:#e6db74">&#34;min-height&#34;</span>] <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#34;&#34;</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 543</span><span>		<span style="color:#a6e22e">mw</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">utils</span>.<span style="color:#a6e22e">ConvertToPixels</span>(<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Style</span>[<span style="color:#e6db74">&#34;min-height&#34;</span>], <span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">EM</span>, <span style="color:#a6e22e">s</span>[<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Parent</span>.<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>].<span style="color:#a6e22e">Width</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 544</span><span>		<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">utils</span>.<span style="color:#a6e22e">Max</span>(<span style="color:#a6e22e">prev</span>, <span style="color:#a6e22e">mw</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 545</span><span>	} <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 546</span><span>		<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">prev</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 547</span><span>	}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 548</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 549</span><span>}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 550</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 551</span><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">getMinHeight</span>(<span style="color:#a6e22e">n</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">element</span>.<span style="color:#a6e22e">Node</span>, <span style="color:#a6e22e">state</span> <span style="color:#f92672">*</span><span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#a6e22e">element</span>.<span style="color:#a6e22e">State</span>) <span style="color:#66d9ef">float32</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 552</span><span>	<span style="color:#a6e22e">s</span> <span style="color:#f92672">:=</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">state</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 553</span><span>	<span style="color:#a6e22e">self</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">s</span>[<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 554</span><span>	<span style="color:#a6e22e">selfHeight</span> <span style="color:#f92672">:=</span> float32(<span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 555</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 556</span><span>	<span style="color:#66d9ef">if</span> len(<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>) &gt; <span style="color:#ae81ff">0</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 557</span><span>		<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">v</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 558</span><span>			<span style="color:#a6e22e">selfHeight</span> = <span style="color:#a6e22e">utils</span>.<span style="color:#a6e22e">Max</span>(<span style="color:#a6e22e">selfHeight</span>, <span style="color:#a6e22e">getNodeHeight</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">v</span>, <span style="color:#a6e22e">state</span>))
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 559</span><span>		}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 560</span><span>	} <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 561</span><span>		<span style="color:#a6e22e">selfHeight</span> = <span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">Height</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 562</span><span>	}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 563</span><span>	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Style</span>[<span style="color:#e6db74">&#34;min-height&#34;</span>] <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#34;&#34;</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 564</span><span>		<span style="color:#a6e22e">mh</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">utils</span>.<span style="color:#a6e22e">ConvertToPixels</span>(<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Style</span>[<span style="color:#e6db74">&#34;min-height&#34;</span>], <span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">EM</span>, <span style="color:#a6e22e">s</span>[<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Parent</span>.<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>].<span style="color:#a6e22e">Width</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 565</span><span>		<span style="color:#a6e22e">selfHeight</span> = <span style="color:#a6e22e">utils</span>.<span style="color:#a6e22e">Max</span>(<span style="color:#a6e22e">mh</span>, <span style="color:#a6e22e">selfHeight</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 566</span><span>	}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 567</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 568</span><span>	<span style="color:#a6e22e">selfHeight</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">Padding</span>.<span style="color:#a6e22e">Top</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">Padding</span>.<span style="color:#a6e22e">Bottom</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 569</span><span>	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">selfHeight</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 570</span><span>}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 571</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 572</span><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">getMinWidth</span>(<span style="color:#a6e22e">n</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">element</span>.<span style="color:#a6e22e">Node</span>, <span style="color:#a6e22e">state</span> <span style="color:#f92672">*</span><span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#a6e22e">element</span>.<span style="color:#a6e22e">State</span>) <span style="color:#66d9ef">float32</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 573</span><span>	<span style="color:#a6e22e">s</span> <span style="color:#f92672">:=</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">state</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 574</span><span>	<span style="color:#a6e22e">self</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">s</span>[<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 575</span><span>	<span style="color:#a6e22e">selfWidth</span> <span style="color:#f92672">:=</span> float32(<span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 576</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 577</span><span>	<span style="color:#66d9ef">if</span> len(<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>) &gt; <span style="color:#ae81ff">0</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 578</span><span>		<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">v</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 579</span><span>			<span style="color:#a6e22e">selfWidth</span> = <span style="color:#a6e22e">utils</span>.<span style="color:#a6e22e">Max</span>(<span style="color:#a6e22e">selfWidth</span>, <span style="color:#a6e22e">getNodeWidth</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">v</span>, <span style="color:#a6e22e">state</span>))
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 580</span><span>		}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 581</span><span>	} <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 582</span><span>		<span style="color:#a6e22e">selfWidth</span> = <span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">Width</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 583</span><span>	}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 584</span><span>	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Style</span>[<span style="color:#e6db74">&#34;min-width&#34;</span>] <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#34;&#34;</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 585</span><span>		<span style="color:#a6e22e">mw</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">utils</span>.<span style="color:#a6e22e">ConvertToPixels</span>(<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Style</span>[<span style="color:#e6db74">&#34;min-width&#34;</span>], <span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">EM</span>, <span style="color:#a6e22e">s</span>[<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Parent</span>.<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>].<span style="color:#a6e22e">Width</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 586</span><span>		<span style="color:#a6e22e">selfWidth</span> = <span style="color:#a6e22e">utils</span>.<span style="color:#a6e22e">Max</span>(<span style="color:#a6e22e">mw</span>, <span style="color:#a6e22e">selfWidth</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 587</span><span>	}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 588</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 589</span><span>	<span style="color:#a6e22e">selfWidth</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">Padding</span>.<span style="color:#a6e22e">Left</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">Padding</span>.<span style="color:#a6e22e">Right</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 590</span><span>	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">selfWidth</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 591</span><span>}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 592</span><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">getMaxWidth</span>(<span style="color:#a6e22e">n</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">element</span>.<span style="color:#a6e22e">Node</span>, <span style="color:#a6e22e">state</span> <span style="color:#f92672">*</span><span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#a6e22e">element</span>.<span style="color:#a6e22e">State</span>) <span style="color:#66d9ef">float32</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 593</span><span>	<span style="color:#a6e22e">s</span> <span style="color:#f92672">:=</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">state</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 594</span><span>	<span style="color:#a6e22e">self</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">s</span>[<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 595</span><span>	<span style="color:#a6e22e">selfWidth</span> <span style="color:#f92672">:=</span> float32(<span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 596</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 597</span><span>	<span style="color:#66d9ef">if</span> len(<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>) &gt; <span style="color:#ae81ff">0</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 598</span><span>		<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">maxRowWidth</span>, <span style="color:#a6e22e">rowWidth</span> <span style="color:#66d9ef">float32</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 599</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 600</span><span>		<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">v</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 601</span><span>			<span style="color:#a6e22e">rowWidth</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">getNodeWidth</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">v</span>, <span style="color:#a6e22e">state</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 602</span><span>			<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">v</span>.<span style="color:#a6e22e">Style</span>[<span style="color:#e6db74">&#34;display&#34;</span>] <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#34;inline&#34;</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 603</span><span>				<span style="color:#a6e22e">maxRowWidth</span> = <span style="color:#a6e22e">utils</span>.<span style="color:#a6e22e">Max</span>(<span style="color:#a6e22e">rowWidth</span>, <span style="color:#a6e22e">maxRowWidth</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 604</span><span>				<span style="color:#a6e22e">rowWidth</span> = <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 605</span><span>			}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 606</span><span>		}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 607</span><span>		<span style="color:#a6e22e">selfWidth</span> = <span style="color:#a6e22e">utils</span>.<span style="color:#a6e22e">Max</span>(<span style="color:#a6e22e">rowWidth</span>, <span style="color:#a6e22e">maxRowWidth</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 608</span><span>	} <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 609</span><span>		<span style="color:#a6e22e">selfWidth</span> = <span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">Width</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 610</span><span>	}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 611</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 612</span><span>	<span style="color:#a6e22e">selfWidth</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">Padding</span>.<span style="color:#a6e22e">Left</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">Padding</span>.<span style="color:#a6e22e">Right</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 613</span><span>	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">selfWidth</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 614</span><span>}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 615</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 616</span><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">getNodeWidth</span>(<span style="color:#a6e22e">n</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">element</span>.<span style="color:#a6e22e">Node</span>, <span style="color:#a6e22e">state</span> <span style="color:#f92672">*</span><span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#a6e22e">element</span>.<span style="color:#a6e22e">State</span>) <span style="color:#66d9ef">float32</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 617</span><span>	<span style="color:#a6e22e">s</span> <span style="color:#f92672">:=</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">state</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 618</span><span>	<span style="color:#a6e22e">self</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">s</span>[<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 619</span><span>	<span style="color:#a6e22e">w</span> <span style="color:#f92672">:=</span> float32(<span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 620</span><span>	<span style="color:#a6e22e">w</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">Padding</span>.<span style="color:#a6e22e">Left</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 621</span><span>	<span style="color:#a6e22e">w</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">Padding</span>.<span style="color:#a6e22e">Right</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 622</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 623</span><span>	<span style="color:#a6e22e">w</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Left</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 624</span><span>	<span style="color:#a6e22e">w</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Right</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 625</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 626</span><span>	<span style="color:#a6e22e">w</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">Width</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 627</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 628</span><span>	<span style="color:#a6e22e">w</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">Border</span>.<span style="color:#a6e22e">Width</span> <span style="color:#f92672">*</span> <span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 629</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 630</span><span>	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">v</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 631</span><span>		<span style="color:#a6e22e">w</span> = <span style="color:#a6e22e">utils</span>.<span style="color:#a6e22e">Max</span>(<span style="color:#a6e22e">w</span>, <span style="color:#a6e22e">getNodeWidth</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">v</span>, <span style="color:#a6e22e">state</span>))
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 632</span><span>	}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 633</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 634</span><span>	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">w</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 635</span><span>}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 636</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 637</span><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">setWidth</span>(<span style="color:#a6e22e">n</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">element</span>.<span style="color:#a6e22e">Node</span>, <span style="color:#a6e22e">state</span> <span style="color:#f92672">*</span><span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#a6e22e">element</span>.<span style="color:#a6e22e">State</span>, <span style="color:#a6e22e">width</span> <span style="color:#66d9ef">float32</span>) <span style="color:#66d9ef">float32</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 638</span><span>	<span style="color:#a6e22e">s</span> <span style="color:#f92672">:=</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">state</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 639</span><span>	<span style="color:#a6e22e">self</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">s</span>[<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 640</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 641</span><span>	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Style</span>[<span style="color:#e6db74">&#34;width&#34;</span>] <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#34;&#34;</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 642</span><span>		<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">utils</span>.<span style="color:#a6e22e">ConvertToPixels</span>(<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Style</span>[<span style="color:#e6db74">&#34;width&#34;</span>], <span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">EM</span>, <span style="color:#a6e22e">s</span>[<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Parent</span>.<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>].<span style="color:#a6e22e">Width</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 643</span><span>	}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 644</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 645</span><span>	<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">maxWidth</span>, <span style="color:#a6e22e">minWidth</span> <span style="color:#66d9ef">float32</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 646</span><span>	<span style="color:#a6e22e">maxWidth</span> = <span style="color:#ae81ff">10e9</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 647</span><span>	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Style</span>[<span style="color:#e6db74">&#34;min-width&#34;</span>] <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#34;&#34;</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 648</span><span>		<span style="color:#a6e22e">minWidth</span> = <span style="color:#a6e22e">utils</span>.<span style="color:#a6e22e">ConvertToPixels</span>(<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Style</span>[<span style="color:#e6db74">&#34;min-width&#34;</span>], <span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">EM</span>, <span style="color:#a6e22e">s</span>[<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Parent</span>.<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>].<span style="color:#a6e22e">Width</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 649</span><span>	}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 650</span><span>	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Style</span>[<span style="color:#e6db74">&#34;max-width&#34;</span>] <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#34;&#34;</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 651</span><span>		<span style="color:#a6e22e">maxWidth</span> = <span style="color:#a6e22e">utils</span>.<span style="color:#a6e22e">ConvertToPixels</span>(<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Style</span>[<span style="color:#e6db74">&#34;min-width&#34;</span>], <span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">EM</span>, <span style="color:#a6e22e">s</span>[<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Parent</span>.<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>].<span style="color:#a6e22e">Width</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 652</span><span>	}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 653</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 654</span><span>	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">utils</span>.<span style="color:#a6e22e">Max</span>(<span style="color:#a6e22e">minWidth</span>, <span style="color:#a6e22e">utils</span>.<span style="color:#a6e22e">Min</span>(<span style="color:#a6e22e">width</span>, <span style="color:#a6e22e">maxWidth</span>))
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 655</span><span>}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 656</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 657</span><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">setHeight</span>(<span style="color:#a6e22e">n</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">element</span>.<span style="color:#a6e22e">Node</span>, <span style="color:#a6e22e">state</span> <span style="color:#f92672">*</span><span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#a6e22e">element</span>.<span style="color:#a6e22e">State</span>, <span style="color:#a6e22e">height</span> <span style="color:#66d9ef">float32</span>) <span style="color:#66d9ef">float32</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 658</span><span>	<span style="color:#a6e22e">s</span> <span style="color:#f92672">:=</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">state</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 659</span><span>	<span style="color:#a6e22e">self</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">s</span>[<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 660</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 661</span><span>	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Style</span>[<span style="color:#e6db74">&#34;height&#34;</span>] <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#34;&#34;</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 662</span><span>		<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">utils</span>.<span style="color:#a6e22e">ConvertToPixels</span>(<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Style</span>[<span style="color:#e6db74">&#34;height&#34;</span>], <span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">EM</span>, <span style="color:#a6e22e">s</span>[<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Parent</span>.<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>].<span style="color:#a6e22e">Height</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 663</span><span>	}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 664</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 665</span><span>	<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">maxHeight</span>, <span style="color:#a6e22e">minHeight</span> <span style="color:#66d9ef">float32</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 666</span><span>	<span style="color:#a6e22e">maxHeight</span> = <span style="color:#ae81ff">10e9</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 667</span><span>	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Style</span>[<span style="color:#e6db74">&#34;min-height&#34;</span>] <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#34;&#34;</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 668</span><span>		<span style="color:#a6e22e">minHeight</span> = <span style="color:#a6e22e">utils</span>.<span style="color:#a6e22e">ConvertToPixels</span>(<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Style</span>[<span style="color:#e6db74">&#34;min-height&#34;</span>], <span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">EM</span>, <span style="color:#a6e22e">s</span>[<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Parent</span>.<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>].<span style="color:#a6e22e">Height</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 669</span><span>	}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 670</span><span>	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Style</span>[<span style="color:#e6db74">&#34;max-height&#34;</span>] <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#34;&#34;</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 671</span><span>		<span style="color:#a6e22e">maxHeight</span> = <span style="color:#a6e22e">utils</span>.<span style="color:#a6e22e">ConvertToPixels</span>(<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Style</span>[<span style="color:#e6db74">&#34;min-height&#34;</span>], <span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">EM</span>, <span style="color:#a6e22e">s</span>[<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Parent</span>.<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>].<span style="color:#a6e22e">Height</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 672</span><span>	}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 673</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 674</span><span>	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">utils</span>.<span style="color:#a6e22e">Max</span>(<span style="color:#a6e22e">minHeight</span>, <span style="color:#a6e22e">utils</span>.<span style="color:#a6e22e">Min</span>(<span style="color:#a6e22e">height</span>, <span style="color:#a6e22e">maxHeight</span>))
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 675</span><span>}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 676</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 677</span><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">getNodeHeight</span>(<span style="color:#a6e22e">n</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">element</span>.<span style="color:#a6e22e">Node</span>, <span style="color:#a6e22e">state</span> <span style="color:#f92672">*</span><span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#a6e22e">element</span>.<span style="color:#a6e22e">State</span>) <span style="color:#66d9ef">float32</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 678</span><span>	<span style="color:#a6e22e">s</span> <span style="color:#f92672">:=</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">state</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 679</span><span>	<span style="color:#a6e22e">self</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">s</span>[<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 680</span><span>	<span style="color:#a6e22e">h</span> <span style="color:#f92672">:=</span> float32(<span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 681</span><span>	<span style="color:#a6e22e">h</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">Padding</span>.<span style="color:#a6e22e">Top</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 682</span><span>	<span style="color:#a6e22e">h</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">Padding</span>.<span style="color:#a6e22e">Bottom</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 683</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 684</span><span>	<span style="color:#a6e22e">h</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Top</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 685</span><span>	<span style="color:#a6e22e">h</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Bottom</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 686</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 687</span><span>	<span style="color:#a6e22e">h</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">Height</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 688</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 689</span><span>	<span style="color:#a6e22e">h</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">Border</span>.<span style="color:#a6e22e">Width</span> <span style="color:#f92672">*</span> <span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 690</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 691</span><span>	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">v</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 692</span><span>		<span style="color:#a6e22e">h</span> = <span style="color:#a6e22e">utils</span>.<span style="color:#a6e22e">Max</span>(<span style="color:#a6e22e">h</span>, <span style="color:#a6e22e">getNodeHeight</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">v</span>, <span style="color:#a6e22e">state</span>))
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 693</span><span>	}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 694</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 695</span><span>	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">h</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 696</span><span>}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 697</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 698</span><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">getInnerSize</span>(<span style="color:#a6e22e">n</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">element</span>.<span style="color:#a6e22e">Node</span>, <span style="color:#a6e22e">state</span> <span style="color:#f92672">*</span><span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#a6e22e">element</span>.<span style="color:#a6e22e">State</span>) (<span style="color:#66d9ef">float32</span>, <span style="color:#66d9ef">float32</span>) {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 699</span><span>	<span style="color:#a6e22e">s</span> <span style="color:#f92672">:=</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">state</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 700</span><span>	<span style="color:#a6e22e">self</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">s</span>[<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 701</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 702</span><span>	<span style="color:#a6e22e">minx</span> <span style="color:#f92672">:=</span> float32(<span style="color:#ae81ff">10e10</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 703</span><span>	<span style="color:#a6e22e">maxw</span> <span style="color:#f92672">:=</span> float32(<span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 704</span><span>	<span style="color:#a6e22e">miny</span> <span style="color:#f92672">:=</span> float32(<span style="color:#ae81ff">10e10</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 705</span><span>	<span style="color:#a6e22e">maxh</span> <span style="color:#f92672">:=</span> float32(<span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 706</span><span>	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">v</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 707</span><span>		<span style="color:#a6e22e">vState</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">s</span>[<span style="color:#a6e22e">v</span>.<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 708</span><span>		<span style="color:#a6e22e">minx</span> = <span style="color:#a6e22e">utils</span>.<span style="color:#a6e22e">Min</span>(<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">X</span>, <span style="color:#a6e22e">minx</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 709</span><span>		<span style="color:#a6e22e">miny</span> = <span style="color:#a6e22e">utils</span>.<span style="color:#a6e22e">Min</span>(<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Y</span><span style="color:#f92672">-</span><span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Top</span>, <span style="color:#a6e22e">miny</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 710</span><span>		<span style="color:#75715e">// Don&#39;t add the top or left because the x&amp;y values already take that into account
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 711</span><span><span style="color:#75715e"></span>		<span style="color:#a6e22e">hOffset</span> <span style="color:#f92672">:=</span> (<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Border</span>.<span style="color:#a6e22e">Width</span>) <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Bottom</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 712</span><span>		<span style="color:#a6e22e">wOffset</span> <span style="color:#f92672">:=</span> (<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Border</span>.<span style="color:#a6e22e">Width</span>) <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Right</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 713</span><span>		<span style="color:#a6e22e">maxw</span> = <span style="color:#a6e22e">utils</span>.<span style="color:#a6e22e">Max</span>(<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">X</span><span style="color:#f92672">+</span><span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Width</span><span style="color:#f92672">+</span><span style="color:#a6e22e">wOffset</span>, <span style="color:#a6e22e">maxw</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 714</span><span>		<span style="color:#a6e22e">maxh</span> = <span style="color:#a6e22e">utils</span>.<span style="color:#a6e22e">Max</span>(<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Y</span><span style="color:#f92672">+</span><span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Height</span><span style="color:#f92672">+</span><span style="color:#a6e22e">hOffset</span>, <span style="color:#a6e22e">maxh</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 715</span><span>	}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 716</span><span>	<span style="color:#a6e22e">w</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">maxw</span> <span style="color:#f92672">-</span> <span style="color:#a6e22e">minx</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 717</span><span>	<span style="color:#a6e22e">h</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">maxh</span> <span style="color:#f92672">-</span> <span style="color:#a6e22e">miny</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 718</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 719</span><span>	<span style="color:#a6e22e">w</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">Padding</span>.<span style="color:#a6e22e">Left</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">Padding</span>.<span style="color:#a6e22e">Right</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 720</span><span>	<span style="color:#a6e22e">h</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">Padding</span>.<span style="color:#a6e22e">Top</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">Padding</span>.<span style="color:#a6e22e">Bottom</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 721</span><span>	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Style</span>[<span style="color:#e6db74">&#34;width&#34;</span>] <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#34;&#34;</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 722</span><span>		<span style="color:#a6e22e">w</span> = <span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">Width</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 723</span><span>	}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 724</span><span>	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Style</span>[<span style="color:#e6db74">&#34;height&#34;</span>] <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#34;&#34;</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 725</span><span>		<span style="color:#a6e22e">h</span> = <span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">Height</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 726</span><span>	}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 727</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 728</span><span>	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">w</span>, <span style="color:#a6e22e">h</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 729</span><span>}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 730</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 731</span><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">add2d</span>(<span style="color:#a6e22e">arr</span> [][]<span style="color:#66d9ef">float32</span>, <span style="color:#a6e22e">index</span> <span style="color:#66d9ef">int</span>) <span style="color:#66d9ef">float32</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 732</span><span>	<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">sum</span> <span style="color:#66d9ef">float32</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 733</span><span>	<span style="color:#66d9ef">if</span> len(<span style="color:#a6e22e">arr</span>) <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 734</span><span>		<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">sum</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 735</span><span>	}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 736</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 737</span><span>	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">:=</span> <span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">i</span> &lt; len(<span style="color:#a6e22e">arr</span>); <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 738</span><span>		<span style="color:#66d9ef">if</span> len(<span style="color:#a6e22e">arr</span>[<span style="color:#a6e22e">i</span>]) <span style="color:#f92672">&lt;=</span> <span style="color:#a6e22e">index</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 739</span><span>			<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">sum</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 740</span><span>		}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 741</span><span>		<span style="color:#a6e22e">sum</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">arr</span>[<span style="color:#a6e22e">i</span>][<span style="color:#a6e22e">index</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 742</span><span>	}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 743</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 744</span><span>	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">sum</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 745</span><span>}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 746</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 747</span><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">colReverse</span>(<span style="color:#a6e22e">cols</span> [][]<span style="color:#66d9ef">int</span>, <span style="color:#a6e22e">n</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">element</span>.<span style="color:#a6e22e">Node</span>, <span style="color:#a6e22e">state</span> <span style="color:#f92672">*</span><span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#a6e22e">element</span>.<span style="color:#a6e22e">State</span>) {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 748</span><span>	<span style="color:#a6e22e">s</span> <span style="color:#f92672">:=</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">state</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 749</span><span>	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">col</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">cols</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 750</span><span>		<span style="color:#a6e22e">tempNodes</span> <span style="color:#f92672">:=</span> []<span style="color:#a6e22e">element</span>.<span style="color:#a6e22e">Node</span>{}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 751</span><span>		<span style="color:#a6e22e">tempStates</span> <span style="color:#f92672">:=</span> []<span style="color:#a6e22e">element</span>.<span style="color:#a6e22e">State</span>{}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 752</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 753</span><span>		<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">col</span>[<span style="color:#ae81ff">1</span>]; <span style="color:#a6e22e">i</span> <span style="color:#f92672">&gt;=</span> <span style="color:#a6e22e">col</span>[<span style="color:#ae81ff">0</span>]; <span style="color:#a6e22e">i</span><span style="color:#f92672">--</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 754</span><span>			<span style="color:#a6e22e">tempNodes</span> = append(<span style="color:#a6e22e">tempNodes</span>, <span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#a6e22e">i</span>])
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 755</span><span>			<span style="color:#a6e22e">tempStates</span> = append(<span style="color:#a6e22e">tempStates</span>, <span style="color:#a6e22e">s</span>[<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#a6e22e">i</span>].<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>])
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 756</span><span>		}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 757</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 758</span><span>		<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">:=</span> <span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">i</span> &lt; len(<span style="color:#a6e22e">tempStates</span>); <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 759</span><span>			<span style="color:#a6e22e">e</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">col</span>[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">+</span> <span style="color:#a6e22e">i</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 760</span><span>			<span style="color:#a6e22e">vState</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">s</span>[<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#a6e22e">e</span>].<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 761</span><span>			<span style="color:#a6e22e">propagateOffsets</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#a6e22e">e</span>], <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">X</span>, <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Y</span>, <span style="color:#a6e22e">tempStates</span>[<span style="color:#a6e22e">i</span>].<span style="color:#a6e22e">X</span>, <span style="color:#a6e22e">tempStates</span>[<span style="color:#a6e22e">i</span>].<span style="color:#a6e22e">Y</span>, <span style="color:#a6e22e">state</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 762</span><span>			<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Y</span> = <span style="color:#a6e22e">tempStates</span>[<span style="color:#a6e22e">i</span>].<span style="color:#a6e22e">Y</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 763</span><span>			(<span style="color:#f92672">*</span><span style="color:#a6e22e">state</span>)[<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#a6e22e">e</span>].<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>] = <span style="color:#a6e22e">vState</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 764</span><span>		}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 765</span><span>		<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">:=</span> <span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">i</span> &lt; len(<span style="color:#a6e22e">tempStates</span>); <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 766</span><span>			<span style="color:#a6e22e">e</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">col</span>[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">+</span> <span style="color:#a6e22e">i</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 767</span><span>			<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#a6e22e">e</span>] = <span style="color:#a6e22e">tempNodes</span>[<span style="color:#a6e22e">i</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 768</span><span>		}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 769</span><span>	}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 770</span><span>}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 771</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 772</span><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">rowReverse</span>(<span style="color:#a6e22e">rows</span> [][]<span style="color:#66d9ef">int</span>, <span style="color:#a6e22e">n</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">element</span>.<span style="color:#a6e22e">Node</span>, <span style="color:#a6e22e">state</span> <span style="color:#f92672">*</span><span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#a6e22e">element</span>.<span style="color:#a6e22e">State</span>) {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 773</span><span>	<span style="color:#a6e22e">s</span> <span style="color:#f92672">:=</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">state</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 774</span><span>	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">row</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">rows</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 775</span><span>		<span style="color:#a6e22e">tempNodes</span> <span style="color:#f92672">:=</span> []<span style="color:#a6e22e">element</span>.<span style="color:#a6e22e">Node</span>{}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 776</span><span>		<span style="color:#a6e22e">tempStates</span> <span style="color:#f92672">:=</span> []<span style="color:#a6e22e">element</span>.<span style="color:#a6e22e">State</span>{}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 777</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 778</span><span>		<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">row</span>[<span style="color:#ae81ff">1</span>] <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>; <span style="color:#a6e22e">i</span> <span style="color:#f92672">&gt;=</span> <span style="color:#a6e22e">row</span>[<span style="color:#ae81ff">0</span>]; <span style="color:#a6e22e">i</span><span style="color:#f92672">--</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 779</span><span>			<span style="color:#a6e22e">tempNodes</span> = append(<span style="color:#a6e22e">tempNodes</span>, <span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#a6e22e">i</span>])
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 780</span><span>			<span style="color:#a6e22e">tempStates</span> = append(<span style="color:#a6e22e">tempStates</span>, <span style="color:#a6e22e">s</span>[<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#a6e22e">i</span>].<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>])
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 781</span><span>		}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 782</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 783</span><span>		<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">:=</span> <span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">i</span> &lt; len(<span style="color:#a6e22e">tempStates</span>); <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 784</span><span>			<span style="color:#a6e22e">e</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">row</span>[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">+</span> <span style="color:#a6e22e">i</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 785</span><span>			<span style="color:#a6e22e">vState</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">s</span>[<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#a6e22e">e</span>].<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 786</span><span>			<span style="color:#a6e22e">propagateOffsets</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#a6e22e">e</span>], <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">X</span>, <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Y</span>, <span style="color:#a6e22e">tempStates</span>[<span style="color:#a6e22e">i</span>].<span style="color:#a6e22e">X</span>, <span style="color:#a6e22e">tempStates</span>[<span style="color:#a6e22e">i</span>].<span style="color:#a6e22e">Y</span>, <span style="color:#a6e22e">state</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 787</span><span>			<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">X</span> = <span style="color:#a6e22e">tempStates</span>[<span style="color:#a6e22e">i</span>].<span style="color:#a6e22e">X</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 788</span><span>			(<span style="color:#f92672">*</span><span style="color:#a6e22e">state</span>)[<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#a6e22e">e</span>].<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>] = <span style="color:#a6e22e">vState</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 789</span><span>		}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 790</span><span>		<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">:=</span> <span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">i</span> &lt; len(<span style="color:#a6e22e">tempStates</span>); <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 791</span><span>			<span style="color:#a6e22e">e</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">row</span>[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">+</span> <span style="color:#a6e22e">i</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 792</span><span>			<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#a6e22e">e</span>] = <span style="color:#a6e22e">tempNodes</span>[<span style="color:#a6e22e">i</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 793</span><span>		}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 794</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 795</span><span>		<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">row</span>[<span style="color:#ae81ff">1</span>] <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>; <span style="color:#a6e22e">i</span> <span style="color:#f92672">&gt;=</span> <span style="color:#a6e22e">row</span>[<span style="color:#ae81ff">0</span>]; <span style="color:#a6e22e">i</span><span style="color:#f92672">--</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 796</span><span>			<span style="color:#a6e22e">vState</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">s</span>[<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#a6e22e">i</span>].<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 797</span><span>			<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">xChng</span> <span style="color:#66d9ef">float32</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 798</span><span>			<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">i</span> &lt; <span style="color:#a6e22e">row</span>[<span style="color:#ae81ff">1</span>]<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 799</span><span>				<span style="color:#a6e22e">sib</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">s</span>[<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#a6e22e">i</span><span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>].<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 800</span><span>				<span style="color:#a6e22e">xChng</span> = <span style="color:#a6e22e">sib</span>.<span style="color:#a6e22e">X</span> <span style="color:#f92672">-</span> (<span style="color:#a6e22e">sib</span>.<span style="color:#a6e22e">Border</span>.<span style="color:#a6e22e">Width</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">sib</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Left</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Right</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Border</span>.<span style="color:#a6e22e">Width</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Width</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 801</span><span>			} <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 802</span><span>				<span style="color:#a6e22e">parent</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">s</span>[<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 803</span><span>				<span style="color:#a6e22e">xChng</span> = ((((<span style="color:#a6e22e">parent</span>.<span style="color:#a6e22e">X</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">parent</span>.<span style="color:#a6e22e">Width</span>) <span style="color:#f92672">-</span> <span style="color:#a6e22e">parent</span>.<span style="color:#a6e22e">Padding</span>.<span style="color:#a6e22e">Right</span>) <span style="color:#f92672">-</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Width</span>) <span style="color:#f92672">-</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Right</span>) <span style="color:#f92672">-</span> (<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Border</span>.<span style="color:#a6e22e">Width</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 804</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 805</span><span>			}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 806</span><span>			<span style="color:#a6e22e">propagateOffsets</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#a6e22e">i</span>], <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">X</span>, <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Y</span>, <span style="color:#a6e22e">xChng</span>, <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Y</span>, <span style="color:#a6e22e">state</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 807</span><span>			<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">X</span> = <span style="color:#a6e22e">xChng</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 808</span><span>			(<span style="color:#f92672">*</span><span style="color:#a6e22e">state</span>)[<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#a6e22e">i</span>].<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>] = <span style="color:#a6e22e">vState</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 809</span><span>		}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 810</span><span>	}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 811</span><span>}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 812</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 813</span><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">justifyRow</span>(<span style="color:#a6e22e">rows</span> [][]<span style="color:#66d9ef">int</span>, <span style="color:#a6e22e">n</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">element</span>.<span style="color:#a6e22e">Node</span>, <span style="color:#a6e22e">state</span> <span style="color:#f92672">*</span><span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#a6e22e">element</span>.<span style="color:#a6e22e">State</span>, <span style="color:#a6e22e">justify</span> <span style="color:#66d9ef">string</span>, <span style="color:#a6e22e">reversed</span> <span style="color:#66d9ef">bool</span>) {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 814</span><span>	<span style="color:#a6e22e">s</span> <span style="color:#f92672">:=</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">state</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 815</span><span>	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">row</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">rows</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 816</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 817</span><span>		<span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">justify</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;flex-end&#34;</span> <span style="color:#f92672">||</span> <span style="color:#a6e22e">justify</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;end&#34;</span> <span style="color:#f92672">||</span> <span style="color:#a6e22e">justify</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;right&#34;</span>) <span style="color:#f92672">&amp;&amp;</span> !<span style="color:#a6e22e">reversed</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 818</span><span>			<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">row</span>[<span style="color:#ae81ff">1</span>] <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>; <span style="color:#a6e22e">i</span> <span style="color:#f92672">&gt;=</span> <span style="color:#a6e22e">row</span>[<span style="color:#ae81ff">0</span>]; <span style="color:#a6e22e">i</span><span style="color:#f92672">--</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 819</span><span>				<span style="color:#a6e22e">vState</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">s</span>[<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#a6e22e">i</span>].<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 820</span><span>				<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">xChng</span> <span style="color:#66d9ef">float32</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 821</span><span>				<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">i</span> &lt; <span style="color:#a6e22e">row</span>[<span style="color:#ae81ff">1</span>]<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 822</span><span>					<span style="color:#a6e22e">sib</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">s</span>[<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#a6e22e">i</span><span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>].<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 823</span><span>					<span style="color:#a6e22e">xChng</span> = <span style="color:#a6e22e">sib</span>.<span style="color:#a6e22e">X</span> <span style="color:#f92672">-</span> (<span style="color:#a6e22e">sib</span>.<span style="color:#a6e22e">Border</span>.<span style="color:#a6e22e">Width</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">sib</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Left</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Right</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Border</span>.<span style="color:#a6e22e">Width</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Width</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 824</span><span>				} <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 825</span><span>					<span style="color:#a6e22e">parent</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">s</span>[<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 826</span><span>					<span style="color:#a6e22e">xChng</span> = ((((<span style="color:#a6e22e">parent</span>.<span style="color:#a6e22e">X</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">parent</span>.<span style="color:#a6e22e">Width</span>) <span style="color:#f92672">-</span> <span style="color:#a6e22e">parent</span>.<span style="color:#a6e22e">Padding</span>.<span style="color:#a6e22e">Right</span>) <span style="color:#f92672">-</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Width</span>) <span style="color:#f92672">-</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Right</span>) <span style="color:#f92672">-</span> (<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Border</span>.<span style="color:#a6e22e">Width</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 827</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 828</span><span>				}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 829</span><span>				<span style="color:#a6e22e">propagateOffsets</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#a6e22e">i</span>], <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">X</span>, <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Y</span>, <span style="color:#a6e22e">xChng</span>, <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Y</span>, <span style="color:#a6e22e">state</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 830</span><span>				<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">X</span> = <span style="color:#a6e22e">xChng</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 831</span><span>				(<span style="color:#f92672">*</span><span style="color:#a6e22e">state</span>)[<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#a6e22e">i</span>].<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>] = <span style="color:#a6e22e">vState</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 832</span><span>			}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 833</span><span>		} <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">justify</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;flex-end&#34;</span> <span style="color:#f92672">||</span> <span style="color:#a6e22e">justify</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;start&#34;</span> <span style="color:#f92672">||</span> <span style="color:#a6e22e">justify</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;left&#34;</span> <span style="color:#f92672">||</span> <span style="color:#a6e22e">justify</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;normal&#34;</span>) <span style="color:#f92672">&amp;&amp;</span> <span style="color:#a6e22e">reversed</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 834</span><span>			<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">row</span>[<span style="color:#ae81ff">0</span>]; <span style="color:#a6e22e">i</span> &lt; <span style="color:#a6e22e">row</span>[<span style="color:#ae81ff">1</span>]; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 835</span><span>				<span style="color:#a6e22e">vState</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">s</span>[<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#a6e22e">i</span>].<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 836</span><span>				<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">xChng</span> <span style="color:#66d9ef">float32</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 837</span><span>				<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">i</span> &gt; <span style="color:#a6e22e">row</span>[<span style="color:#ae81ff">0</span>] {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 838</span><span>					<span style="color:#a6e22e">sib</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">s</span>[<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#a6e22e">i</span><span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>].<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 839</span><span>					<span style="color:#a6e22e">xChng</span> = <span style="color:#a6e22e">sib</span>.<span style="color:#a6e22e">X</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">sib</span>.<span style="color:#a6e22e">Width</span> <span style="color:#f92672">+</span> (<span style="color:#a6e22e">sib</span>.<span style="color:#a6e22e">Border</span>.<span style="color:#a6e22e">Width</span> <span style="color:#f92672">*</span> <span style="color:#ae81ff">2</span>) <span style="color:#f92672">+</span> <span style="color:#a6e22e">sib</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Right</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Left</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Border</span>.<span style="color:#a6e22e">Width</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 840</span><span>				} <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 841</span><span>					<span style="color:#a6e22e">parent</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">s</span>[<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 842</span><span>					<span style="color:#a6e22e">xChng</span> = <span style="color:#a6e22e">parent</span>.<span style="color:#a6e22e">X</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">parent</span>.<span style="color:#a6e22e">Padding</span>.<span style="color:#a6e22e">Right</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Left</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Border</span>.<span style="color:#a6e22e">Width</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">parent</span>.<span style="color:#a6e22e">Border</span>.<span style="color:#a6e22e">Width</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 843</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 844</span><span>				}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 845</span><span>				<span style="color:#a6e22e">propagateOffsets</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#a6e22e">i</span>], <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">X</span>, <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Y</span>, <span style="color:#a6e22e">xChng</span>, <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Y</span>, <span style="color:#a6e22e">state</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 846</span><span>				<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">X</span> = <span style="color:#a6e22e">xChng</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 847</span><span>				(<span style="color:#f92672">*</span><span style="color:#a6e22e">state</span>)[<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#a6e22e">i</span>].<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>] = <span style="color:#a6e22e">vState</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 848</span><span>			}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 849</span><span>		} <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">justify</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;center&#34;</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 850</span><span>			<span style="color:#75715e">// get width of row then center (by getting last x + w + mr + b)
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 851</span><span><span style="color:#75715e"></span>			<span style="color:#a6e22e">f</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">s</span>[<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#a6e22e">row</span>[<span style="color:#ae81ff">0</span>]].<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 852</span><span>			<span style="color:#a6e22e">l</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">s</span>[<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#a6e22e">row</span>[<span style="color:#ae81ff">1</span>]<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>].<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 853</span><span>			<span style="color:#a6e22e">parent</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">s</span>[<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 854</span><span>			<span style="color:#a6e22e">po</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">parent</span>.<span style="color:#a6e22e">X</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">parent</span>.<span style="color:#a6e22e">Border</span>.<span style="color:#a6e22e">Width</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 855</span><span>			<span style="color:#a6e22e">offset</span> <span style="color:#f92672">:=</span> (<span style="color:#a6e22e">parent</span>.<span style="color:#a6e22e">Width</span> <span style="color:#f92672">-</span> ((<span style="color:#a6e22e">f</span>.<span style="color:#a6e22e">X</span> <span style="color:#f92672">-</span> <span style="color:#a6e22e">po</span>) <span style="color:#f92672">+</span> (<span style="color:#a6e22e">l</span>.<span style="color:#a6e22e">X</span> <span style="color:#f92672">-</span> <span style="color:#a6e22e">po</span>) <span style="color:#f92672">+</span> <span style="color:#a6e22e">l</span>.<span style="color:#a6e22e">Width</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">f</span>.<span style="color:#a6e22e">Border</span>.<span style="color:#a6e22e">Width</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">l</span>.<span style="color:#a6e22e">Border</span>.<span style="color:#a6e22e">Width</span>)) <span style="color:#f92672">/</span> <span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 856</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 857</span><span>			<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">row</span>[<span style="color:#ae81ff">0</span>]; <span style="color:#a6e22e">i</span> &lt; <span style="color:#a6e22e">row</span>[<span style="color:#ae81ff">1</span>]; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 858</span><span>				<span style="color:#a6e22e">vState</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">s</span>[<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#a6e22e">i</span>].<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 859</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 860</span><span>				<span style="color:#66d9ef">if</span> !<span style="color:#a6e22e">reversed</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 861</span><span>					<span style="color:#a6e22e">propagateOffsets</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#a6e22e">i</span>], <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">X</span>, <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Y</span>, <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">X</span><span style="color:#f92672">+</span><span style="color:#a6e22e">offset</span>, <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Y</span>, <span style="color:#a6e22e">state</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 862</span><span>					<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">X</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">offset</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 863</span><span>				} <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 864</span><span>					<span style="color:#a6e22e">propagateOffsets</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#a6e22e">i</span>], <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">X</span>, <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Y</span>, <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">X</span><span style="color:#f92672">-</span><span style="color:#a6e22e">offset</span>, <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Y</span>, <span style="color:#a6e22e">state</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 865</span><span>					<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">X</span> <span style="color:#f92672">-=</span> <span style="color:#a6e22e">offset</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 866</span><span>				}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 867</span><span>				(<span style="color:#f92672">*</span><span style="color:#a6e22e">state</span>)[<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#a6e22e">i</span>].<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>] = <span style="color:#a6e22e">vState</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 868</span><span>			}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 869</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 870</span><span>		} <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">justify</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;space-between&#34;</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 871</span><span>			<span style="color:#75715e">// get width of row then center (by getting last x + w + mr + b)
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 872</span><span><span style="color:#75715e"></span>			<span style="color:#a6e22e">f</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">s</span>[<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#a6e22e">row</span>[<span style="color:#ae81ff">0</span>]].<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 873</span><span>			<span style="color:#a6e22e">l</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">s</span>[<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#a6e22e">row</span>[<span style="color:#ae81ff">1</span>]<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>].<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 874</span><span>			<span style="color:#a6e22e">parent</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">s</span>[<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 875</span><span>			<span style="color:#a6e22e">po</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">parent</span>.<span style="color:#a6e22e">Border</span>.<span style="color:#a6e22e">Width</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">parent</span>.<span style="color:#a6e22e">Width</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 876</span><span>			<span style="color:#a6e22e">po</span> <span style="color:#f92672">-=</span> <span style="color:#a6e22e">parent</span>.<span style="color:#a6e22e">Padding</span>.<span style="color:#a6e22e">Left</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">parent</span>.<span style="color:#a6e22e">Padding</span>.<span style="color:#a6e22e">Right</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 877</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 878</span><span>			<span style="color:#75715e">// make po repersent the total space between elements
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 879</span><span><span style="color:#75715e"></span>			<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">row</span>[<span style="color:#ae81ff">0</span>]; <span style="color:#a6e22e">i</span> &lt; <span style="color:#a6e22e">row</span>[<span style="color:#ae81ff">1</span>]; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 880</span><span>				<span style="color:#a6e22e">vState</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">s</span>[<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#a6e22e">i</span>].<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 881</span><span>				<span style="color:#a6e22e">po</span> <span style="color:#f92672">-=</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Width</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Left</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Right</span> <span style="color:#f92672">+</span> (<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Border</span>.<span style="color:#a6e22e">Width</span> <span style="color:#f92672">*</span> <span style="color:#ae81ff">2</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 882</span><span>			}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 883</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 884</span><span>			<span style="color:#a6e22e">po</span> <span style="color:#f92672">/=</span> float32(((<span style="color:#a6e22e">row</span>[<span style="color:#ae81ff">1</span>]) <span style="color:#f92672">-</span> <span style="color:#a6e22e">row</span>[<span style="color:#ae81ff">0</span>]) <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 885</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 886</span><span>			<span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">row</span>[<span style="color:#ae81ff">1</span>]<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>)<span style="color:#f92672">-</span><span style="color:#a6e22e">row</span>[<span style="color:#ae81ff">0</span>] &gt; <span style="color:#ae81ff">0</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 887</span><span>				<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">row</span>[<span style="color:#ae81ff">0</span>]; <span style="color:#a6e22e">i</span> &lt; <span style="color:#a6e22e">row</span>[<span style="color:#ae81ff">1</span>]; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 888</span><span>					<span style="color:#a6e22e">vState</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">s</span>[<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#a6e22e">i</span>].<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 889</span><span>					<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">offset</span> <span style="color:#66d9ef">float32</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 890</span><span>					<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">==</span> <span style="color:#a6e22e">row</span>[<span style="color:#ae81ff">0</span>] {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 891</span><span>						<span style="color:#a6e22e">offset</span> = <span style="color:#a6e22e">parent</span>.<span style="color:#a6e22e">X</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">parent</span>.<span style="color:#a6e22e">Padding</span>.<span style="color:#a6e22e">Left</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">f</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Left</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">f</span>.<span style="color:#a6e22e">Border</span>.<span style="color:#a6e22e">Width</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 892</span><span>					} <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">==</span> <span style="color:#a6e22e">row</span>[<span style="color:#ae81ff">1</span>]<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 893</span><span>						<span style="color:#a6e22e">offset</span> = (<span style="color:#a6e22e">parent</span>.<span style="color:#a6e22e">X</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">parent</span>.<span style="color:#a6e22e">Width</span>) <span style="color:#f92672">-</span> (<span style="color:#a6e22e">l</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Right</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">l</span>.<span style="color:#a6e22e">Border</span>.<span style="color:#a6e22e">Width</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">l</span>.<span style="color:#a6e22e">Width</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">parent</span>.<span style="color:#a6e22e">Padding</span>.<span style="color:#a6e22e">Right</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 894</span><span>					} <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 895</span><span>						<span style="color:#66d9ef">if</span> !<span style="color:#a6e22e">reversed</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 896</span><span>							<span style="color:#a6e22e">offset</span> = <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">X</span> <span style="color:#f92672">+</span> (<span style="color:#a6e22e">po</span> <span style="color:#f92672">*</span> float32(<span style="color:#a6e22e">i</span><span style="color:#f92672">-</span><span style="color:#a6e22e">row</span>[<span style="color:#ae81ff">0</span>]))
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 897</span><span>						} <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 898</span><span>							<span style="color:#a6e22e">offset</span> = <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">X</span> <span style="color:#f92672">-</span> (<span style="color:#a6e22e">po</span> <span style="color:#f92672">*</span> float32(((<span style="color:#a6e22e">row</span>[<span style="color:#ae81ff">1</span>]<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>)<span style="color:#f92672">-</span><span style="color:#a6e22e">row</span>[<span style="color:#ae81ff">0</span>])<span style="color:#f92672">-</span>(<span style="color:#a6e22e">i</span><span style="color:#f92672">-</span><span style="color:#a6e22e">row</span>[<span style="color:#ae81ff">0</span>])))
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 899</span><span>						}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 900</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 901</span><span>					}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 902</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 903</span><span>					<span style="color:#a6e22e">propagateOffsets</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#a6e22e">i</span>], <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">X</span>, <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Y</span>, <span style="color:#a6e22e">offset</span>, <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Y</span>, <span style="color:#a6e22e">state</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 904</span><span>					<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">X</span> = <span style="color:#a6e22e">offset</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 905</span><span>					(<span style="color:#f92672">*</span><span style="color:#a6e22e">state</span>)[<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#a6e22e">i</span>].<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>] = <span style="color:#a6e22e">vState</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 906</span><span>				}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 907</span><span>			}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 908</span><span>			<span style="color:#75715e">//  else {
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 909</span><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 910</span><span>			<span style="color:#75715e">// this is/was causing issues, removed and it fixed its self
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 911</span><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 912</span><span>			<span style="color:#75715e">// if there is one element move left
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 913</span><span><span style="color:#75715e"></span>			<span style="color:#75715e">// vState := s[n.Children[(row[1]-1)-row[0]].Properties.Id]
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 914</span><span><span style="color:#75715e"></span>			<span style="color:#75715e">// var offset float32
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 915</span><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 916</span><span>			<span style="color:#75715e">// if !reversed {
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 917</span><span><span style="color:#75715e"></span>			<span style="color:#75715e">// 	offset = parent.X + parent.Padding.Left + f.Margin.Left + f.Border.Width
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 918</span><span><span style="color:#75715e"></span>			<span style="color:#75715e">// 	propagateOffsets(&amp;n.Children[(row[1]-1)-row[0]], vState.X, vState.Y, offset, vState.Y, state)
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 919</span><span><span style="color:#75715e"></span>			<span style="color:#75715e">// 	vState.X = offset
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 920</span><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 921</span><span>			<span style="color:#75715e">// 	(*state)[n.Children[(row[1]-1)-row[0]].Properties.Id] = vState
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 922</span><span><span style="color:#75715e"></span>			<span style="color:#75715e">// }
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 923</span><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 924</span><span>			<span style="color:#75715e">// }
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 925</span><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 926</span><span>		} <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">justify</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;space-evenly&#34;</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 927</span><span>			<span style="color:#75715e">// get width of row then center (by getting last x + w + mr + b)
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 928</span><span><span style="color:#75715e"></span>			<span style="color:#a6e22e">parent</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">s</span>[<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 929</span><span>			<span style="color:#a6e22e">po</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">parent</span>.<span style="color:#a6e22e">Border</span>.<span style="color:#a6e22e">Width</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">parent</span>.<span style="color:#a6e22e">Width</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 930</span><span>			<span style="color:#a6e22e">po</span> <span style="color:#f92672">-=</span> <span style="color:#a6e22e">parent</span>.<span style="color:#a6e22e">Padding</span>.<span style="color:#a6e22e">Left</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">parent</span>.<span style="color:#a6e22e">Padding</span>.<span style="color:#a6e22e">Right</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 931</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 932</span><span>			<span style="color:#75715e">// make po repersent the total space between elements
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 933</span><span><span style="color:#75715e"></span>			<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">row</span>[<span style="color:#ae81ff">0</span>]; <span style="color:#a6e22e">i</span> &lt; <span style="color:#a6e22e">row</span>[<span style="color:#ae81ff">1</span>]; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 934</span><span>				<span style="color:#a6e22e">vState</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">s</span>[<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#a6e22e">i</span>].<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 935</span><span>				<span style="color:#a6e22e">po</span> <span style="color:#f92672">-=</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Width</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Left</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Right</span> <span style="color:#f92672">+</span> (<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Border</span>.<span style="color:#a6e22e">Width</span> <span style="color:#f92672">*</span> <span style="color:#ae81ff">2</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 936</span><span>			}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 937</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 938</span><span>			<span style="color:#a6e22e">po</span> <span style="color:#f92672">/=</span> float32(((<span style="color:#a6e22e">row</span>[<span style="color:#ae81ff">1</span>]) <span style="color:#f92672">-</span> <span style="color:#a6e22e">row</span>[<span style="color:#ae81ff">0</span>]) <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 939</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 940</span><span>			<span style="color:#75715e">// get width of row then center (by getting last x + w + mr + b)
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 941</span><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 942</span><span>			<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">row</span>[<span style="color:#ae81ff">0</span>]; <span style="color:#a6e22e">i</span> &lt; <span style="color:#a6e22e">row</span>[<span style="color:#ae81ff">1</span>]; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 943</span><span>				<span style="color:#a6e22e">vState</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">s</span>[<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#a6e22e">i</span>].<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 944</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 945</span><span>				<span style="color:#66d9ef">if</span> !<span style="color:#a6e22e">reversed</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 946</span><span>					<span style="color:#a6e22e">offset</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">po</span> <span style="color:#f92672">*</span> (float32(<span style="color:#a6e22e">i</span><span style="color:#f92672">-</span><span style="color:#a6e22e">row</span>[<span style="color:#ae81ff">0</span>]) <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 947</span><span>					<span style="color:#a6e22e">propagateOffsets</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#a6e22e">i</span>], <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">X</span>, <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Y</span>, <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">X</span><span style="color:#f92672">+</span><span style="color:#a6e22e">offset</span>, <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Y</span>, <span style="color:#a6e22e">state</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 948</span><span>					<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">X</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">offset</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 949</span><span>				} <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 950</span><span>					<span style="color:#a6e22e">offset</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">po</span> <span style="color:#f92672">*</span> float32(((<span style="color:#a6e22e">row</span>[<span style="color:#ae81ff">1</span>]<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>)<span style="color:#f92672">-</span><span style="color:#a6e22e">row</span>[<span style="color:#ae81ff">0</span>])<span style="color:#f92672">-</span>((<span style="color:#a6e22e">i</span><span style="color:#f92672">-</span><span style="color:#a6e22e">row</span>[<span style="color:#ae81ff">0</span>])<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>))
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 951</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 952</span><span>					<span style="color:#a6e22e">propagateOffsets</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#a6e22e">i</span>], <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">X</span>, <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Y</span>, <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">X</span><span style="color:#f92672">-</span><span style="color:#a6e22e">offset</span>, <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Y</span>, <span style="color:#a6e22e">state</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 953</span><span>					<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">X</span> <span style="color:#f92672">-=</span> <span style="color:#a6e22e">offset</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 954</span><span>				}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 955</span><span>				(<span style="color:#f92672">*</span><span style="color:#a6e22e">state</span>)[<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#a6e22e">i</span>].<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>] = <span style="color:#a6e22e">vState</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 956</span><span>			}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 957</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 958</span><span>		} <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">justify</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;space-around&#34;</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 959</span><span>			<span style="color:#75715e">// get width of row then center (by getting last x + w + mr + b)
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 960</span><span><span style="color:#75715e"></span>			<span style="color:#a6e22e">parent</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">s</span>[<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 961</span><span>			<span style="color:#a6e22e">po</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">parent</span>.<span style="color:#a6e22e">Border</span>.<span style="color:#a6e22e">Width</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">parent</span>.<span style="color:#a6e22e">Width</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 962</span><span>			<span style="color:#a6e22e">po</span> <span style="color:#f92672">-=</span> <span style="color:#a6e22e">parent</span>.<span style="color:#a6e22e">Padding</span>.<span style="color:#a6e22e">Left</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">parent</span>.<span style="color:#a6e22e">Padding</span>.<span style="color:#a6e22e">Right</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 963</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 964</span><span>			<span style="color:#75715e">// make po repersent the total space between elements
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 965</span><span><span style="color:#75715e"></span>			<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">row</span>[<span style="color:#ae81ff">0</span>]; <span style="color:#a6e22e">i</span> &lt; <span style="color:#a6e22e">row</span>[<span style="color:#ae81ff">1</span>]; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 966</span><span>				<span style="color:#a6e22e">vState</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">s</span>[<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#a6e22e">i</span>].<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 967</span><span>				<span style="color:#a6e22e">po</span> <span style="color:#f92672">-=</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Width</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Left</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Right</span> <span style="color:#f92672">+</span> (<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Border</span>.<span style="color:#a6e22e">Width</span> <span style="color:#f92672">*</span> <span style="color:#ae81ff">2</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 968</span><span>			}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 969</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 970</span><span>			<span style="color:#a6e22e">po</span> <span style="color:#f92672">/=</span> float32(((<span style="color:#a6e22e">row</span>[<span style="color:#ae81ff">1</span>]) <span style="color:#f92672">-</span> <span style="color:#a6e22e">row</span>[<span style="color:#ae81ff">0</span>]))
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 971</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 972</span><span>			<span style="color:#75715e">// get width of row then center (by getting last x + w + mr + b)
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 973</span><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 974</span><span>			<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">row</span>[<span style="color:#ae81ff">0</span>]; <span style="color:#a6e22e">i</span> &lt; <span style="color:#a6e22e">row</span>[<span style="color:#ae81ff">1</span>]; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 975</span><span>				<span style="color:#a6e22e">vState</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">s</span>[<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#a6e22e">i</span>].<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 976</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 977</span><span>				<span style="color:#66d9ef">if</span> !<span style="color:#a6e22e">reversed</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 978</span><span>					<span style="color:#a6e22e">m</span> <span style="color:#f92672">:=</span> (float32(<span style="color:#a6e22e">i</span><span style="color:#f92672">-</span><span style="color:#a6e22e">row</span>[<span style="color:#ae81ff">0</span>]) <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 979</span><span>					<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">i</span><span style="color:#f92672">-</span><span style="color:#a6e22e">row</span>[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 980</span><span>						<span style="color:#a6e22e">m</span> = <span style="color:#ae81ff">0.5</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 981</span><span>					} <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 982</span><span>						<span style="color:#a6e22e">m</span> <span style="color:#f92672">-=</span> <span style="color:#ae81ff">0.5</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 983</span><span>					}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 984</span><span>					<span style="color:#a6e22e">offset</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">po</span> <span style="color:#f92672">*</span> <span style="color:#a6e22e">m</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 985</span><span>					<span style="color:#a6e22e">propagateOffsets</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#a6e22e">i</span>], <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">X</span>, <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Y</span>, <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">X</span><span style="color:#f92672">+</span><span style="color:#a6e22e">offset</span>, <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Y</span>, <span style="color:#a6e22e">state</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 986</span><span>					<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">X</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">offset</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 987</span><span>				} <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 988</span><span>					<span style="color:#a6e22e">m</span> <span style="color:#f92672">:=</span> float32(((<span style="color:#a6e22e">row</span>[<span style="color:#ae81ff">1</span>] <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>) <span style="color:#f92672">-</span> <span style="color:#a6e22e">row</span>[<span style="color:#ae81ff">0</span>]) <span style="color:#f92672">-</span> ((<span style="color:#a6e22e">i</span> <span style="color:#f92672">-</span> <span style="color:#a6e22e">row</span>[<span style="color:#ae81ff">0</span>]) <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>))
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 989</span><span>					<span style="color:#a6e22e">m</span> <span style="color:#f92672">-=</span> <span style="color:#ae81ff">0.5</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 990</span><span>					<span style="color:#a6e22e">offset</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">po</span> <span style="color:#f92672">*</span> <span style="color:#a6e22e">m</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 991</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 992</span><span>					<span style="color:#a6e22e">propagateOffsets</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#a6e22e">i</span>], <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">X</span>, <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Y</span>, <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">X</span><span style="color:#f92672">-</span><span style="color:#a6e22e">offset</span>, <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Y</span>, <span style="color:#a6e22e">state</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 993</span><span>					<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">X</span> <span style="color:#f92672">-=</span> <span style="color:#a6e22e">offset</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 994</span><span>				}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 995</span><span>				(<span style="color:#f92672">*</span><span style="color:#a6e22e">state</span>)[<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#a6e22e">i</span>].<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>] = <span style="color:#a6e22e">vState</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 996</span><span>			}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 997</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 998</span><span>		}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 999</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1000</span><span>	}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1001</span><span>}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1002</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1003</span><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">alignRow</span>(<span style="color:#a6e22e">rows</span> [][]<span style="color:#66d9ef">int</span>, <span style="color:#a6e22e">n</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">element</span>.<span style="color:#a6e22e">Node</span>, <span style="color:#a6e22e">state</span> <span style="color:#f92672">*</span><span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#a6e22e">element</span>.<span style="color:#a6e22e">State</span>, <span style="color:#a6e22e">align</span>, <span style="color:#a6e22e">content</span> <span style="color:#66d9ef">string</span>) {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1004</span><span>	<span style="color:#75715e">// !ISSUE: Baseline isn&#39;t properly impleamented
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1005</span><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1006</span><span>	<span style="color:#a6e22e">s</span> <span style="color:#f92672">:=</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">state</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1007</span><span>	<span style="color:#a6e22e">self</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">s</span>[<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1008</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1009</span><span>	<span style="color:#a6e22e">maxes</span> <span style="color:#f92672">:=</span> []<span style="color:#66d9ef">float32</span>{}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1010</span><span>	<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">maxesTotal</span> <span style="color:#66d9ef">float32</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1011</span><span>	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">row</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">rows</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1012</span><span>		<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">maxH</span> <span style="color:#66d9ef">float32</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1013</span><span>		<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">row</span>[<span style="color:#ae81ff">0</span>]; <span style="color:#a6e22e">i</span> &lt; <span style="color:#a6e22e">row</span>[<span style="color:#ae81ff">1</span>]; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1014</span><span>			<span style="color:#a6e22e">vState</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">s</span>[<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#a6e22e">i</span>].<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1015</span><span>			<span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">h</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">getInnerSize</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#a6e22e">i</span>], <span style="color:#a6e22e">state</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1016</span><span>			<span style="color:#a6e22e">h</span> = <span style="color:#a6e22e">minHeight</span>(<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#a6e22e">i</span>], <span style="color:#a6e22e">state</span>, <span style="color:#a6e22e">h</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1017</span><span>			<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Height</span> = <span style="color:#a6e22e">h</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1018</span><span>			<span style="color:#a6e22e">h</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Top</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Bottom</span> <span style="color:#f92672">+</span> (<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Border</span>.<span style="color:#a6e22e">Width</span> <span style="color:#f92672">*</span> <span style="color:#ae81ff">2</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1019</span><span>			<span style="color:#a6e22e">maxH</span> = <span style="color:#a6e22e">utils</span>.<span style="color:#a6e22e">Max</span>(<span style="color:#a6e22e">maxH</span>, <span style="color:#a6e22e">h</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1020</span><span>			(<span style="color:#f92672">*</span><span style="color:#a6e22e">state</span>)[<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#a6e22e">i</span>].<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>] = <span style="color:#a6e22e">vState</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1021</span><span>		}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1022</span><span>		<span style="color:#a6e22e">maxes</span> = append(<span style="color:#a6e22e">maxes</span>, <span style="color:#a6e22e">maxH</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1023</span><span>		<span style="color:#a6e22e">maxesTotal</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">maxH</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1024</span><span>	}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1025</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1026</span><span>	<span style="color:#a6e22e">os</span> <span style="color:#f92672">:=</span> ((<span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">Height</span> <span style="color:#f92672">-</span> (<span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">Padding</span>.<span style="color:#a6e22e">Top</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">Padding</span>.<span style="color:#a6e22e">Bottom</span> <span style="color:#f92672">+</span> (<span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">Border</span>.<span style="color:#a6e22e">Width</span> <span style="color:#f92672">*</span> <span style="color:#ae81ff">2</span>))) <span style="color:#f92672">-</span> <span style="color:#a6e22e">maxesTotal</span>) <span style="color:#f92672">/</span> float32(len(<span style="color:#a6e22e">rows</span>))
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1027</span><span>	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">os</span> &lt; <span style="color:#ae81ff">0</span> <span style="color:#f92672">||</span> <span style="color:#a6e22e">content</span> <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#34;normal&#34;</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1028</span><span>		<span style="color:#a6e22e">os</span> = <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1029</span><span>	}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1030</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1031</span><span>	<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">contentOffset</span> <span style="color:#66d9ef">float32</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1032</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1033</span><span>	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">content</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;center&#34;</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1034</span><span>		<span style="color:#a6e22e">contentOffset</span> = ((<span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">Height</span> <span style="color:#f92672">-</span> (<span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">Padding</span>.<span style="color:#a6e22e">Top</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">Padding</span>.<span style="color:#a6e22e">Bottom</span> <span style="color:#f92672">+</span> (<span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">Border</span>.<span style="color:#a6e22e">Width</span> <span style="color:#f92672">*</span> <span style="color:#ae81ff">2</span>))) <span style="color:#f92672">-</span> <span style="color:#a6e22e">maxesTotal</span>) <span style="color:#f92672">/</span> <span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1035</span><span>	} <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">content</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;end&#34;</span> <span style="color:#f92672">||</span> <span style="color:#a6e22e">content</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;flex-end&#34;</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1036</span><span>		<span style="color:#a6e22e">contentOffset</span> = ((<span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">Height</span> <span style="color:#f92672">-</span> (<span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">Padding</span>.<span style="color:#a6e22e">Top</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">Padding</span>.<span style="color:#a6e22e">Bottom</span> <span style="color:#f92672">+</span> (<span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">Border</span>.<span style="color:#a6e22e">Width</span> <span style="color:#f92672">*</span> <span style="color:#ae81ff">2</span>))) <span style="color:#f92672">-</span> <span style="color:#a6e22e">maxesTotal</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1037</span><span>	} <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">content</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;start&#34;</span> <span style="color:#f92672">||</span> <span style="color:#a6e22e">content</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;flex-start&#34;</span> <span style="color:#f92672">||</span> <span style="color:#a6e22e">content</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;baseline&#34;</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1038</span><span>		<span style="color:#75715e">// This is redundent but it helps keep track
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1039</span><span><span style="color:#75715e"></span>		<span style="color:#a6e22e">contentOffset</span> = <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1040</span><span>	} <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">content</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;space-between&#34;</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1041</span><span>		<span style="color:#a6e22e">os</span> = ((<span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">Height</span> <span style="color:#f92672">-</span> (<span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">Padding</span>.<span style="color:#a6e22e">Top</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">Padding</span>.<span style="color:#a6e22e">Bottom</span> <span style="color:#f92672">+</span> (<span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">Border</span>.<span style="color:#a6e22e">Width</span> <span style="color:#f92672">*</span> <span style="color:#ae81ff">2</span>))) <span style="color:#f92672">-</span> <span style="color:#a6e22e">maxesTotal</span>) <span style="color:#f92672">/</span> float32(len(<span style="color:#a6e22e">rows</span>)<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1042</span><span>	} <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">content</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;space-around&#34;</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1043</span><span>		<span style="color:#a6e22e">os</span> = ((<span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">Height</span> <span style="color:#f92672">-</span> (<span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">Padding</span>.<span style="color:#a6e22e">Top</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">Padding</span>.<span style="color:#a6e22e">Bottom</span> <span style="color:#f92672">+</span> (<span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">Border</span>.<span style="color:#a6e22e">Width</span> <span style="color:#f92672">*</span> <span style="color:#ae81ff">2</span>))) <span style="color:#f92672">-</span> <span style="color:#a6e22e">maxesTotal</span>) <span style="color:#f92672">/</span> float32(len(<span style="color:#a6e22e">rows</span>))
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1044</span><span>		<span style="color:#a6e22e">contentOffset</span> = <span style="color:#a6e22e">os</span> <span style="color:#f92672">/</span> <span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1045</span><span>	} <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">content</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;space-evenly&#34;</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1046</span><span>		<span style="color:#a6e22e">os</span> = ((<span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">Height</span> <span style="color:#f92672">-</span> (<span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">Padding</span>.<span style="color:#a6e22e">Top</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">Padding</span>.<span style="color:#a6e22e">Bottom</span> <span style="color:#f92672">+</span> (<span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">Border</span>.<span style="color:#a6e22e">Width</span> <span style="color:#f92672">*</span> <span style="color:#ae81ff">2</span>))) <span style="color:#f92672">-</span> <span style="color:#a6e22e">maxesTotal</span>) <span style="color:#f92672">/</span> float32(len(<span style="color:#a6e22e">rows</span>)<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1047</span><span>		<span style="color:#a6e22e">contentOffset</span> = <span style="color:#a6e22e">os</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1048</span><span>	}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1049</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1050</span><span>	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">c</span>, <span style="color:#a6e22e">row</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">rows</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1051</span><span>		<span style="color:#a6e22e">maxH</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">maxes</span>[<span style="color:#a6e22e">c</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1052</span><span>		<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">sum</span> <span style="color:#66d9ef">float32</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1053</span><span>		<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">:=</span> <span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">i</span> &lt; <span style="color:#a6e22e">c</span>; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1054</span><span>			<span style="color:#a6e22e">sum</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">maxes</span>[<span style="color:#a6e22e">i</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1055</span><span>		}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1056</span><span>		<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">align</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;start&#34;</span> <span style="color:#f92672">||</span> <span style="color:#a6e22e">align</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;flex-start&#34;</span> <span style="color:#f92672">||</span> <span style="color:#a6e22e">align</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;self-start&#34;</span> <span style="color:#f92672">||</span> <span style="color:#a6e22e">align</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;normal&#34;</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1057</span><span>			<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">row</span>[<span style="color:#ae81ff">0</span>]; <span style="color:#a6e22e">i</span> &lt; <span style="color:#a6e22e">row</span>[<span style="color:#ae81ff">1</span>]; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1058</span><span>				<span style="color:#a6e22e">vState</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">s</span>[<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#a6e22e">i</span>].<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1059</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1060</span><span>				<span style="color:#a6e22e">offset</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">sum</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">Y</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">Padding</span>.<span style="color:#a6e22e">Top</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Top</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">contentOffset</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1061</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1062</span><span>				<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Style</span>[<span style="color:#e6db74">&#34;height&#34;</span>] <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#34;&#34;</span> <span style="color:#f92672">||</span> <span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Style</span>[<span style="color:#e6db74">&#34;min-height&#34;</span>] <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#34;&#34;</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1063</span><span>					<span style="color:#a6e22e">offset</span> <span style="color:#f92672">+=</span> ((<span style="color:#a6e22e">os</span>) <span style="color:#f92672">*</span> float32(<span style="color:#a6e22e">c</span>))
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1064</span><span>				}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1065</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1066</span><span>				<span style="color:#a6e22e">propagateOffsets</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#a6e22e">i</span>], <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">X</span>, <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Y</span>, <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">X</span>, <span style="color:#a6e22e">offset</span>, <span style="color:#a6e22e">state</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1067</span><span>				<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Y</span> = <span style="color:#a6e22e">offset</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1068</span><span>				(<span style="color:#f92672">*</span><span style="color:#a6e22e">state</span>)[<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#a6e22e">i</span>].<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>] = <span style="color:#a6e22e">vState</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1069</span><span>			}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1070</span><span>		} <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">align</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;center&#34;</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1071</span><span>			<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">row</span>[<span style="color:#ae81ff">0</span>]; <span style="color:#a6e22e">i</span> &lt; <span style="color:#a6e22e">row</span>[<span style="color:#ae81ff">1</span>]; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1072</span><span>				<span style="color:#a6e22e">vState</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">s</span>[<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#a6e22e">i</span>].<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1073</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1074</span><span>				<span style="color:#a6e22e">offset</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">sum</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">Y</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">Padding</span>.<span style="color:#a6e22e">Top</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Top</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">contentOffset</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1075</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1076</span><span>				<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Style</span>[<span style="color:#e6db74">&#34;height&#34;</span>] <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#34;&#34;</span> <span style="color:#f92672">||</span> <span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Style</span>[<span style="color:#e6db74">&#34;min-height&#34;</span>] <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#34;&#34;</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1077</span><span>					<span style="color:#a6e22e">offset</span> <span style="color:#f92672">+=</span> (<span style="color:#a6e22e">os</span> <span style="color:#f92672">*</span> float32(<span style="color:#a6e22e">c</span><span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>)) <span style="color:#f92672">-</span> (<span style="color:#a6e22e">os</span> <span style="color:#f92672">/</span> <span style="color:#ae81ff">2</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1078</span><span>				}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1079</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1080</span><span>				<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Height</span><span style="color:#f92672">+</span><span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Top</span><span style="color:#f92672">+</span><span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Bottom</span><span style="color:#f92672">+</span>(<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Border</span>.<span style="color:#a6e22e">Width</span><span style="color:#f92672">*</span><span style="color:#ae81ff">2</span>) &lt; <span style="color:#a6e22e">maxH</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1081</span><span>					<span style="color:#a6e22e">offset</span> <span style="color:#f92672">+=</span> (<span style="color:#a6e22e">maxH</span> <span style="color:#f92672">-</span> (<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Height</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Top</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Bottom</span> <span style="color:#f92672">+</span> (<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Border</span>.<span style="color:#a6e22e">Width</span> <span style="color:#f92672">*</span> <span style="color:#ae81ff">2</span>))) <span style="color:#f92672">/</span> <span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1082</span><span>				}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1083</span><span>				<span style="color:#a6e22e">propagateOffsets</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#a6e22e">i</span>], <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">X</span>, <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Y</span>, <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">X</span>, <span style="color:#a6e22e">offset</span>, <span style="color:#a6e22e">state</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1084</span><span>				<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Y</span> = <span style="color:#a6e22e">offset</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1085</span><span>				(<span style="color:#f92672">*</span><span style="color:#a6e22e">state</span>)[<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#a6e22e">i</span>].<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>] = <span style="color:#a6e22e">vState</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1086</span><span>			}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1087</span><span>		} <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">align</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;end&#34;</span> <span style="color:#f92672">||</span> <span style="color:#a6e22e">align</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;flex-end&#34;</span> <span style="color:#f92672">||</span> <span style="color:#a6e22e">align</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;self-end&#34;</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1088</span><span>			<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">row</span>[<span style="color:#ae81ff">0</span>]; <span style="color:#a6e22e">i</span> &lt; <span style="color:#a6e22e">row</span>[<span style="color:#ae81ff">1</span>]; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1089</span><span>				<span style="color:#a6e22e">vState</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">s</span>[<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#a6e22e">i</span>].<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1090</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1091</span><span>				<span style="color:#a6e22e">offset</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">sum</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">Y</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">Padding</span>.<span style="color:#a6e22e">Top</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Top</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">contentOffset</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1092</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1093</span><span>				<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Style</span>[<span style="color:#e6db74">&#34;height&#34;</span>] <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#34;&#34;</span> <span style="color:#f92672">||</span> <span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Style</span>[<span style="color:#e6db74">&#34;min-height&#34;</span>] <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#34;&#34;</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1094</span><span>					<span style="color:#a6e22e">offset</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">os</span> <span style="color:#f92672">*</span> float32(<span style="color:#a6e22e">c</span><span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1095</span><span>				}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1096</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1097</span><span>				<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Height</span><span style="color:#f92672">+</span><span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Top</span><span style="color:#f92672">+</span><span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Bottom</span><span style="color:#f92672">+</span>(<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Border</span>.<span style="color:#a6e22e">Width</span><span style="color:#f92672">*</span><span style="color:#ae81ff">2</span>) &lt; <span style="color:#a6e22e">maxH</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1098</span><span>					<span style="color:#a6e22e">offset</span> <span style="color:#f92672">+=</span> (<span style="color:#a6e22e">maxH</span> <span style="color:#f92672">-</span> (<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Height</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Top</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Bottom</span> <span style="color:#f92672">+</span> (<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Border</span>.<span style="color:#a6e22e">Width</span> <span style="color:#f92672">*</span> <span style="color:#ae81ff">2</span>)))
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1099</span><span>				}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1100</span><span>				<span style="color:#a6e22e">propagateOffsets</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#a6e22e">i</span>], <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">X</span>, <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Y</span>, <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">X</span>, <span style="color:#a6e22e">offset</span>, <span style="color:#a6e22e">state</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1101</span><span>				<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Y</span> = <span style="color:#a6e22e">offset</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1102</span><span>				(<span style="color:#f92672">*</span><span style="color:#a6e22e">state</span>)[<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#a6e22e">i</span>].<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>] = <span style="color:#a6e22e">vState</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1103</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1104</span><span>			}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1105</span><span>		} <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">align</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;stretch&#34;</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1106</span><span>			<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">row</span>[<span style="color:#ae81ff">0</span>]; <span style="color:#a6e22e">i</span> &lt; <span style="color:#a6e22e">row</span>[<span style="color:#ae81ff">1</span>]; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1107</span><span>				<span style="color:#a6e22e">vState</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">s</span>[<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#a6e22e">i</span>].<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1108</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1109</span><span>				<span style="color:#a6e22e">offset</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">sum</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">Y</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">Padding</span>.<span style="color:#a6e22e">Top</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Top</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1110</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1111</span><span>				<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Style</span>[<span style="color:#e6db74">&#34;height&#34;</span>] <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#34;&#34;</span> <span style="color:#f92672">||</span> <span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Style</span>[<span style="color:#e6db74">&#34;min-height&#34;</span>] <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#34;&#34;</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1112</span><span>					<span style="color:#a6e22e">offset</span> <span style="color:#f92672">+=</span> ((<span style="color:#a6e22e">os</span>) <span style="color:#f92672">*</span> float32(<span style="color:#a6e22e">c</span>))
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1113</span><span>				}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1114</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1115</span><span>				<span style="color:#a6e22e">propagateOffsets</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#a6e22e">i</span>], <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">X</span>, <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Y</span>, <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">X</span>, <span style="color:#a6e22e">offset</span>, <span style="color:#a6e22e">state</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1116</span><span>				<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Y</span> = <span style="color:#a6e22e">offset</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1117</span><span>				<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Height</span> = <span style="color:#a6e22e">maxH</span> <span style="color:#f92672">-</span> (<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Top</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Bottom</span> <span style="color:#f92672">+</span> (<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Border</span>.<span style="color:#a6e22e">Width</span> <span style="color:#f92672">*</span> <span style="color:#ae81ff">2</span>))
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1118</span><span>				(<span style="color:#f92672">*</span><span style="color:#a6e22e">state</span>)[<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#a6e22e">i</span>].<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>] = <span style="color:#a6e22e">vState</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1119</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1120</span><span>			}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1121</span><span>		}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1122</span><span>	}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1123</span><span>}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1124</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1125</span><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">justifyCols</span>(<span style="color:#a6e22e">cols</span> [][]<span style="color:#66d9ef">int</span>, <span style="color:#a6e22e">n</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">element</span>.<span style="color:#a6e22e">Node</span>, <span style="color:#a6e22e">state</span> <span style="color:#f92672">*</span><span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#a6e22e">element</span>.<span style="color:#a6e22e">State</span>, <span style="color:#a6e22e">justify</span> <span style="color:#66d9ef">string</span>, <span style="color:#a6e22e">reversed</span> <span style="color:#66d9ef">bool</span>) {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1126</span><span>	<span style="color:#a6e22e">s</span> <span style="color:#f92672">:=</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">state</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1127</span><span>	<span style="color:#a6e22e">self</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">s</span>[<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1128</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1129</span><span>	<span style="color:#a6e22e">selfHeight</span> <span style="color:#f92672">:=</span> (<span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">Height</span>) <span style="color:#f92672">-</span> (<span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">Padding</span>.<span style="color:#a6e22e">Top</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">Padding</span>.<span style="color:#a6e22e">Bottom</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1130</span><span>	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">col</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">cols</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1131</span><span>		<span style="color:#a6e22e">yCollect</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">Y</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">Padding</span>.<span style="color:#a6e22e">Top</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1132</span><span>		<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">colHeight</span> <span style="color:#66d9ef">float32</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1133</span><span>		<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">col</span>[<span style="color:#ae81ff">0</span>]; <span style="color:#a6e22e">i</span> <span style="color:#f92672">&lt;=</span> <span style="color:#a6e22e">col</span>[<span style="color:#ae81ff">1</span>]; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1134</span><span>			<span style="color:#a6e22e">v</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#a6e22e">i</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1135</span><span>			<span style="color:#a6e22e">vState</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">s</span>[<span style="color:#a6e22e">v</span>.<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1136</span><span>			<span style="color:#a6e22e">colHeight</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Height</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Top</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Bottom</span> <span style="color:#f92672">+</span> (<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Border</span>.<span style="color:#a6e22e">Width</span> <span style="color:#f92672">*</span> <span style="color:#ae81ff">2</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1137</span><span>		}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1138</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1139</span><span>		<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">justify</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;center&#34;</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1140</span><span>			<span style="color:#a6e22e">offset</span> <span style="color:#f92672">:=</span> ((<span style="color:#a6e22e">selfHeight</span> <span style="color:#f92672">-</span> <span style="color:#a6e22e">colHeight</span>) <span style="color:#f92672">/</span> <span style="color:#ae81ff">2</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1141</span><span>			<span style="color:#a6e22e">yCollect</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">offset</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1142</span><span>			<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">col</span>[<span style="color:#ae81ff">0</span>]; <span style="color:#a6e22e">i</span> <span style="color:#f92672">&lt;=</span> <span style="color:#a6e22e">col</span>[<span style="color:#ae81ff">1</span>]; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1143</span><span>				<span style="color:#a6e22e">v</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#a6e22e">i</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1144</span><span>				<span style="color:#a6e22e">vState</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">s</span>[<span style="color:#a6e22e">v</span>.<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1145</span><span>				<span style="color:#a6e22e">yStore</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Y</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1146</span><span>				<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Y</span> = <span style="color:#a6e22e">yCollect</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Top</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1147</span><span>				<span style="color:#a6e22e">yCollect</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Height</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Bottom</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Border</span>.<span style="color:#a6e22e">Width</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Top</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Border</span>.<span style="color:#a6e22e">Width</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1148</span><span>				<span style="color:#a6e22e">propagateOffsets</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#a6e22e">i</span>], <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">X</span>, <span style="color:#a6e22e">yStore</span>, <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">X</span>, <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Y</span>, <span style="color:#a6e22e">state</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1149</span><span>				(<span style="color:#f92672">*</span><span style="color:#a6e22e">state</span>)[<span style="color:#a6e22e">v</span>.<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>] = <span style="color:#a6e22e">vState</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1150</span><span>			}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1151</span><span>		}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1152</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1153</span><span>		<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">justify</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;end&#34;</span> <span style="color:#f92672">||</span> <span style="color:#a6e22e">justify</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;flex-end&#34;</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1154</span><span>			<span style="color:#a6e22e">offset</span> <span style="color:#f92672">:=</span> (<span style="color:#a6e22e">selfHeight</span> <span style="color:#f92672">-</span> <span style="color:#a6e22e">colHeight</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1155</span><span>			<span style="color:#a6e22e">yCollect</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">offset</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1156</span><span>			<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">col</span>[<span style="color:#ae81ff">0</span>]; <span style="color:#a6e22e">i</span> <span style="color:#f92672">&lt;=</span> <span style="color:#a6e22e">col</span>[<span style="color:#ae81ff">1</span>]; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1157</span><span>				<span style="color:#a6e22e">v</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#a6e22e">i</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1158</span><span>				<span style="color:#a6e22e">vState</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">s</span>[<span style="color:#a6e22e">v</span>.<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1159</span><span>				<span style="color:#a6e22e">yStore</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Y</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1160</span><span>				<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Y</span> = <span style="color:#a6e22e">yCollect</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Border</span>.<span style="color:#a6e22e">Width</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Top</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1161</span><span>				<span style="color:#a6e22e">yCollect</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Height</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Bottom</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Border</span>.<span style="color:#a6e22e">Width</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Top</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Border</span>.<span style="color:#a6e22e">Width</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1162</span><span>				<span style="color:#a6e22e">propagateOffsets</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#a6e22e">i</span>], <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">X</span>, <span style="color:#a6e22e">yStore</span>, <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">X</span>, <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Y</span>, <span style="color:#a6e22e">state</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1163</span><span>				(<span style="color:#f92672">*</span><span style="color:#a6e22e">state</span>)[<span style="color:#a6e22e">v</span>.<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>] = <span style="color:#a6e22e">vState</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1164</span><span>			}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1165</span><span>		}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1166</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1167</span><span>		<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">justify</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;space-evenly&#34;</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1168</span><span>			<span style="color:#a6e22e">offset</span> <span style="color:#f92672">:=</span> (<span style="color:#a6e22e">selfHeight</span> <span style="color:#f92672">-</span> <span style="color:#a6e22e">colHeight</span>) <span style="color:#f92672">/</span> (float32(<span style="color:#a6e22e">col</span>[<span style="color:#ae81ff">1</span>]<span style="color:#f92672">-</span><span style="color:#a6e22e">col</span>[<span style="color:#ae81ff">0</span>]) <span style="color:#f92672">+</span> <span style="color:#ae81ff">2</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1169</span><span>			<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">col</span>[<span style="color:#ae81ff">0</span>]; <span style="color:#a6e22e">i</span> <span style="color:#f92672">&lt;=</span> <span style="color:#a6e22e">col</span>[<span style="color:#ae81ff">1</span>]; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1170</span><span>				<span style="color:#a6e22e">v</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#a6e22e">i</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1171</span><span>				<span style="color:#a6e22e">vState</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">s</span>[<span style="color:#a6e22e">v</span>.<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1172</span><span>				<span style="color:#a6e22e">yStore</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Y</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1173</span><span>				<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Y</span> = <span style="color:#a6e22e">yCollect</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Border</span>.<span style="color:#a6e22e">Width</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Top</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">offset</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1174</span><span>				<span style="color:#a6e22e">yCollect</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Height</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Bottom</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Border</span>.<span style="color:#a6e22e">Width</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Top</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Border</span>.<span style="color:#a6e22e">Width</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">offset</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1175</span><span>				<span style="color:#a6e22e">propagateOffsets</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#a6e22e">i</span>], <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">X</span>, <span style="color:#a6e22e">yStore</span>, <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">X</span>, <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Y</span>, <span style="color:#a6e22e">state</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1176</span><span>				(<span style="color:#f92672">*</span><span style="color:#a6e22e">state</span>)[<span style="color:#a6e22e">v</span>.<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>] = <span style="color:#a6e22e">vState</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1177</span><span>			}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1178</span><span>		}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1179</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1180</span><span>		<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">justify</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;space-between&#34;</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1181</span><span>			<span style="color:#a6e22e">offset</span> <span style="color:#f92672">:=</span> (<span style="color:#a6e22e">selfHeight</span> <span style="color:#f92672">-</span> <span style="color:#a6e22e">colHeight</span>) <span style="color:#f92672">/</span> (float32(<span style="color:#a6e22e">col</span>[<span style="color:#ae81ff">1</span>] <span style="color:#f92672">-</span> <span style="color:#a6e22e">col</span>[<span style="color:#ae81ff">0</span>]))
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1182</span><span>			<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">col</span>[<span style="color:#ae81ff">0</span>]; <span style="color:#a6e22e">i</span> <span style="color:#f92672">&lt;=</span> <span style="color:#a6e22e">col</span>[<span style="color:#ae81ff">1</span>]; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1183</span><span>				<span style="color:#a6e22e">v</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#a6e22e">i</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1184</span><span>				<span style="color:#a6e22e">vState</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">s</span>[<span style="color:#a6e22e">v</span>.<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1185</span><span>				<span style="color:#a6e22e">yStore</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Y</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1186</span><span>				<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Y</span> = <span style="color:#a6e22e">yCollect</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Border</span>.<span style="color:#a6e22e">Width</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Top</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1187</span><span>				<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">col</span>[<span style="color:#ae81ff">1</span>]<span style="color:#f92672">-</span><span style="color:#a6e22e">col</span>[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">!=</span> <span style="color:#ae81ff">0</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1188</span><span>					<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Y</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">offset</span> <span style="color:#f92672">*</span> float32(<span style="color:#a6e22e">i</span><span style="color:#f92672">-</span><span style="color:#a6e22e">col</span>[<span style="color:#ae81ff">0</span>])
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1189</span><span>				} <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">reversed</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1190</span><span>					<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Y</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">selfHeight</span> <span style="color:#f92672">-</span> (<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Height</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Bottom</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Border</span>.<span style="color:#a6e22e">Width</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Top</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Border</span>.<span style="color:#a6e22e">Width</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1191</span><span>				}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1192</span><span>				<span style="color:#a6e22e">yCollect</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Height</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Bottom</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Border</span>.<span style="color:#a6e22e">Width</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Top</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Border</span>.<span style="color:#a6e22e">Width</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1193</span><span>				<span style="color:#a6e22e">propagateOffsets</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#a6e22e">i</span>], <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">X</span>, <span style="color:#a6e22e">yStore</span>, <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">X</span>, <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Y</span>, <span style="color:#a6e22e">state</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1194</span><span>				(<span style="color:#f92672">*</span><span style="color:#a6e22e">state</span>)[<span style="color:#a6e22e">v</span>.<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>] = <span style="color:#a6e22e">vState</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1195</span><span>			}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1196</span><span>		}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1197</span><span>		<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">justify</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;space-around&#34;</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1198</span><span>			<span style="color:#a6e22e">offset</span> <span style="color:#f92672">:=</span> (<span style="color:#a6e22e">selfHeight</span> <span style="color:#f92672">-</span> <span style="color:#a6e22e">colHeight</span>) <span style="color:#f92672">/</span> (float32(<span style="color:#a6e22e">col</span>[<span style="color:#ae81ff">1</span>]<span style="color:#f92672">-</span><span style="color:#a6e22e">col</span>[<span style="color:#ae81ff">0</span>]) <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1199</span><span>			<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">col</span>[<span style="color:#ae81ff">0</span>]; <span style="color:#a6e22e">i</span> <span style="color:#f92672">&lt;=</span> <span style="color:#a6e22e">col</span>[<span style="color:#ae81ff">1</span>]; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1200</span><span>				<span style="color:#a6e22e">v</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#a6e22e">i</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1201</span><span>				<span style="color:#a6e22e">vState</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">s</span>[<span style="color:#a6e22e">v</span>.<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1202</span><span>				<span style="color:#a6e22e">yStore</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Y</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1203</span><span>				<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Y</span> = <span style="color:#a6e22e">yCollect</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Border</span>.<span style="color:#a6e22e">Width</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Top</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1204</span><span>				<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">col</span>[<span style="color:#ae81ff">1</span>]<span style="color:#f92672">-</span><span style="color:#a6e22e">col</span>[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1205</span><span>					<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Y</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">offset</span> <span style="color:#f92672">/</span> <span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1206</span><span>				} <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1207</span><span>					<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Y</span> <span style="color:#f92672">+=</span> (<span style="color:#a6e22e">offset</span> <span style="color:#f92672">*</span> float32(<span style="color:#a6e22e">i</span><span style="color:#f92672">-</span><span style="color:#a6e22e">col</span>[<span style="color:#ae81ff">0</span>])) <span style="color:#f92672">+</span> (<span style="color:#a6e22e">offset</span> <span style="color:#f92672">/</span> <span style="color:#ae81ff">2</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1208</span><span>				}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1209</span><span>				<span style="color:#a6e22e">yCollect</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Height</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Bottom</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Border</span>.<span style="color:#a6e22e">Width</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Top</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Border</span>.<span style="color:#a6e22e">Width</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1210</span><span>				<span style="color:#a6e22e">propagateOffsets</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#a6e22e">i</span>], <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">X</span>, <span style="color:#a6e22e">yStore</span>, <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">X</span>, <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Y</span>, <span style="color:#a6e22e">state</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1211</span><span>				(<span style="color:#f92672">*</span><span style="color:#a6e22e">state</span>)[<span style="color:#a6e22e">v</span>.<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>] = <span style="color:#a6e22e">vState</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1212</span><span>			}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1213</span><span>		}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1214</span><span>	}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1215</span><span>}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1216</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1217</span><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">alignCols</span>(<span style="color:#a6e22e">cols</span> [][]<span style="color:#66d9ef">int</span>, <span style="color:#a6e22e">n</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">element</span>.<span style="color:#a6e22e">Node</span>, <span style="color:#a6e22e">state</span> <span style="color:#f92672">*</span><span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#a6e22e">element</span>.<span style="color:#a6e22e">State</span>, <span style="color:#a6e22e">align</span>, <span style="color:#a6e22e">content</span> <span style="color:#66d9ef">string</span>, <span style="color:#a6e22e">minWidths</span> [][]<span style="color:#66d9ef">float32</span>) {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1218</span><span>	<span style="color:#a6e22e">s</span> <span style="color:#f92672">:=</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">state</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1219</span><span>	<span style="color:#a6e22e">self</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">s</span>[<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1220</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1221</span><span>	<span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">align</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;stretch&#34;</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#a6e22e">content</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;stretch&#34;</span>) <span style="color:#f92672">||</span> (<span style="color:#a6e22e">align</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;stretch&#34;</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#a6e22e">content</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;normal&#34;</span>) <span style="color:#f92672">||</span> (<span style="color:#a6e22e">align</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;normal&#34;</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#a6e22e">content</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;stretch&#34;</span>) {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1222</span><span>		<span style="color:#66d9ef">return</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1223</span><span>	}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1224</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1225</span><span>	<span style="color:#a6e22e">selfWidth</span> <span style="color:#f92672">:=</span> (<span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">Width</span> <span style="color:#f92672">-</span> <span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">Padding</span>.<span style="color:#a6e22e">Left</span>) <span style="color:#f92672">-</span> <span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">Padding</span>.<span style="color:#a6e22e">Right</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1226</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1227</span><span>	<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">rowWidth</span> <span style="color:#66d9ef">float32</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1228</span><span>	<span style="color:#a6e22e">colWidths</span> <span style="color:#f92672">:=</span> []<span style="color:#66d9ef">float32</span>{}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1229</span><span>	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">col</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">cols</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1230</span><span>		<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">maxWidth</span> <span style="color:#66d9ef">float32</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1231</span><span>		<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">col</span>[<span style="color:#ae81ff">0</span>]; <span style="color:#a6e22e">i</span> <span style="color:#f92672">&lt;=</span> <span style="color:#a6e22e">col</span>[<span style="color:#ae81ff">1</span>]; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1232</span><span>			<span style="color:#a6e22e">v</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#a6e22e">i</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1233</span><span>			<span style="color:#a6e22e">vState</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">s</span>[<span style="color:#a6e22e">v</span>.<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1234</span><span>			<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Width</span> = <span style="color:#a6e22e">setWidth</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">v</span>, <span style="color:#a6e22e">state</span>, <span style="color:#a6e22e">minWidths</span>[<span style="color:#a6e22e">i</span>][<span style="color:#ae81ff">0</span>])
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1235</span><span>			<span style="color:#a6e22e">maxWidth</span> = <span style="color:#a6e22e">utils</span>.<span style="color:#a6e22e">Max</span>(<span style="color:#a6e22e">maxWidth</span>, <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Width</span><span style="color:#f92672">+</span><span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Left</span><span style="color:#f92672">+</span><span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Right</span><span style="color:#f92672">+</span>(<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Border</span>.<span style="color:#a6e22e">Width</span><span style="color:#f92672">*</span><span style="color:#ae81ff">2</span>))
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1236</span><span>			(<span style="color:#f92672">*</span><span style="color:#a6e22e">state</span>)[<span style="color:#a6e22e">v</span>.<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>] = <span style="color:#a6e22e">vState</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1237</span><span>		}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1238</span><span>		<span style="color:#a6e22e">colWidths</span> = append(<span style="color:#a6e22e">colWidths</span>, <span style="color:#a6e22e">maxWidth</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1239</span><span>		<span style="color:#a6e22e">rowWidth</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">maxWidth</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1240</span><span>	}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1241</span><span>	<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">xOffset</span> <span style="color:#66d9ef">float32</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1242</span><span>	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">c</span>, <span style="color:#a6e22e">col</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">cols</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1243</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1244</span><span>		<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">align</span> <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#34;normal&#34;</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1245</span><span>			<span style="color:#75715e">// var offset float32
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1246</span><span><span style="color:#75715e"></span>			<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">col</span>[<span style="color:#ae81ff">0</span>]; <span style="color:#a6e22e">i</span> <span style="color:#f92672">&lt;=</span> <span style="color:#a6e22e">col</span>[<span style="color:#ae81ff">1</span>]; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1247</span><span>				<span style="color:#a6e22e">v</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#a6e22e">i</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1248</span><span>				<span style="color:#a6e22e">vState</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">s</span>[<span style="color:#a6e22e">v</span>.<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1249</span><span>				<span style="color:#a6e22e">xStore</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">X</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1250</span><span>				<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">X</span> = <span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">X</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">Padding</span>.<span style="color:#a6e22e">Left</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">Border</span>.<span style="color:#a6e22e">Width</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">xOffset</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Left</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Border</span>.<span style="color:#a6e22e">Width</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1251</span><span>				<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">align</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;center&#34;</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1252</span><span>					<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">X</span> <span style="color:#f92672">+=</span> ((<span style="color:#a6e22e">colWidths</span>[<span style="color:#a6e22e">c</span>] <span style="color:#f92672">-</span> (<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Width</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Left</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Right</span> <span style="color:#f92672">+</span> (<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Border</span>.<span style="color:#a6e22e">Width</span> <span style="color:#f92672">*</span> <span style="color:#ae81ff">2</span>))) <span style="color:#f92672">/</span> <span style="color:#ae81ff">2</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1253</span><span>				} <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">align</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;end&#34;</span> <span style="color:#f92672">||</span> <span style="color:#a6e22e">align</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;flex-end&#34;</span> <span style="color:#f92672">||</span> <span style="color:#a6e22e">align</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;self-end&#34;</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1254</span><span>					<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">X</span> <span style="color:#f92672">+=</span> (<span style="color:#a6e22e">colWidths</span>[<span style="color:#a6e22e">c</span>] <span style="color:#f92672">-</span> (<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Width</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Left</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Right</span> <span style="color:#f92672">+</span> (<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Border</span>.<span style="color:#a6e22e">Width</span> <span style="color:#f92672">*</span> <span style="color:#ae81ff">2</span>)))
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1255</span><span>				} <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">align</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;stretch&#34;</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1256</span><span>					<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Width</span> = (<span style="color:#a6e22e">colWidths</span>[<span style="color:#a6e22e">c</span>] <span style="color:#f92672">-</span> (<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Left</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Right</span> <span style="color:#f92672">+</span> (<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Border</span>.<span style="color:#a6e22e">Width</span> <span style="color:#f92672">*</span> <span style="color:#ae81ff">2</span>)))
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1257</span><span>				}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1258</span><span>				<span style="color:#a6e22e">propagateOffsets</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#a6e22e">i</span>], <span style="color:#a6e22e">xStore</span>, <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Y</span>, <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">X</span>, <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Y</span>, <span style="color:#a6e22e">state</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1259</span><span>				(<span style="color:#f92672">*</span><span style="color:#a6e22e">state</span>)[<span style="color:#a6e22e">v</span>.<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>] = <span style="color:#a6e22e">vState</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1260</span><span>			}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1261</span><span>			<span style="color:#a6e22e">xOffset</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">colWidths</span>[<span style="color:#a6e22e">c</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1262</span><span>		} <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1263</span><span>			<span style="color:#75715e">// if align is set to normal then make the elements the size of the column
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1264</span><span><span style="color:#75715e"></span>			<span style="color:#75715e">// the size of the column is
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1265</span><span><span style="color:#75715e"></span>			<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">col</span>[<span style="color:#ae81ff">0</span>]; <span style="color:#a6e22e">i</span> <span style="color:#f92672">&lt;=</span> <span style="color:#a6e22e">col</span>[<span style="color:#ae81ff">1</span>]; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1266</span><span>				<span style="color:#a6e22e">v</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#a6e22e">i</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1267</span><span>				<span style="color:#a6e22e">vState</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">s</span>[<span style="color:#a6e22e">v</span>.<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1268</span><span>				<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Width</span> = <span style="color:#a6e22e">colWidths</span>[<span style="color:#a6e22e">c</span>] <span style="color:#f92672">-</span> (<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Left</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Margin</span>.<span style="color:#a6e22e">Right</span> <span style="color:#f92672">+</span> (<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Border</span>.<span style="color:#a6e22e">Width</span> <span style="color:#f92672">*</span> <span style="color:#ae81ff">2</span>))
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1269</span><span>				(<span style="color:#f92672">*</span><span style="color:#a6e22e">state</span>)[<span style="color:#a6e22e">v</span>.<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>] = <span style="color:#a6e22e">vState</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1270</span><span>			}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1271</span><span>		}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1272</span><span>	}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1273</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1274</span><span>	<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">offset</span> <span style="color:#66d9ef">float32</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1275</span><span>	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">content</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;center&#34;</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1276</span><span>		<span style="color:#a6e22e">offset</span> = ((<span style="color:#a6e22e">selfWidth</span> <span style="color:#f92672">-</span> <span style="color:#a6e22e">rowWidth</span>) <span style="color:#f92672">/</span> <span style="color:#ae81ff">2</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1277</span><span>	}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1278</span><span>	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">content</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;end&#34;</span> <span style="color:#f92672">||</span> <span style="color:#a6e22e">content</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;flex-end&#34;</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1279</span><span>		<span style="color:#a6e22e">offset</span> = (<span style="color:#a6e22e">selfWidth</span> <span style="color:#f92672">-</span> <span style="color:#a6e22e">rowWidth</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1280</span><span>	}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1281</span><span>	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">content</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;space-evenly&#34;</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1282</span><span>		<span style="color:#a6e22e">offset</span> = (<span style="color:#a6e22e">selfWidth</span> <span style="color:#f92672">-</span> <span style="color:#a6e22e">rowWidth</span>) <span style="color:#f92672">/</span> (float32(len(<span style="color:#a6e22e">cols</span>) <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>))
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1283</span><span>	}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1284</span><span>	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">content</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;space-between&#34;</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1285</span><span>		<span style="color:#a6e22e">offset</span> = (<span style="color:#a6e22e">selfWidth</span> <span style="color:#f92672">-</span> <span style="color:#a6e22e">rowWidth</span>) <span style="color:#f92672">/</span> (float32(len(<span style="color:#a6e22e">cols</span>) <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>))
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1286</span><span>	}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1287</span><span>	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">content</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;space-around&#34;</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1288</span><span>		<span style="color:#a6e22e">offset</span> = (<span style="color:#a6e22e">selfWidth</span> <span style="color:#f92672">-</span> <span style="color:#a6e22e">rowWidth</span>) <span style="color:#f92672">/</span> (float32(len(<span style="color:#a6e22e">cols</span>)))
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1289</span><span>	}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1290</span><span>	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">content</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;normal&#34;</span> <span style="color:#f92672">||</span> <span style="color:#a6e22e">content</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;stretch&#34;</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1291</span><span>		<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">align</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;start&#34;</span> <span style="color:#f92672">||</span> <span style="color:#a6e22e">align</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;end&#34;</span> <span style="color:#f92672">||</span> <span style="color:#a6e22e">content</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;flex-end&#34;</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1292</span><span>			<span style="color:#a6e22e">offset</span> = (<span style="color:#a6e22e">selfWidth</span> <span style="color:#f92672">-</span> <span style="color:#a6e22e">rowWidth</span>) <span style="color:#f92672">/</span> (float32(len(<span style="color:#a6e22e">cols</span>)))
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1293</span><span>		}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1294</span><span>		<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">align</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;center&#34;</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1295</span><span>			<span style="color:#a6e22e">offset</span> = ((<span style="color:#a6e22e">selfWidth</span> <span style="color:#f92672">-</span> <span style="color:#a6e22e">rowWidth</span>) <span style="color:#f92672">/</span> (float32(len(<span style="color:#a6e22e">cols</span>))))
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1296</span><span>		}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1297</span><span>	}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1298</span><span>	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">c</span>, <span style="color:#a6e22e">col</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">cols</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1299</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1300</span><span>		<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">col</span>[<span style="color:#ae81ff">0</span>]; <span style="color:#a6e22e">i</span> <span style="color:#f92672">&lt;=</span> <span style="color:#a6e22e">col</span>[<span style="color:#ae81ff">1</span>]; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1301</span><span>			<span style="color:#a6e22e">v</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#a6e22e">i</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1302</span><span>			<span style="color:#a6e22e">vState</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">s</span>[<span style="color:#a6e22e">v</span>.<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1303</span><span>			<span style="color:#a6e22e">xStore</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">X</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1304</span><span>			<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">content</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;center&#34;</span> <span style="color:#f92672">||</span> <span style="color:#a6e22e">content</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;end&#34;</span> <span style="color:#f92672">||</span> <span style="color:#a6e22e">content</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;flex-end&#34;</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1305</span><span>				<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">X</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">offset</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1306</span><span>			} <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">content</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;space-evenly&#34;</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1307</span><span>				<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">X</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">offset</span> <span style="color:#f92672">*</span> float32(<span style="color:#a6e22e">c</span><span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1308</span><span>			} <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">content</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;space-between&#34;</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1309</span><span>				<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">X</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">offset</span> <span style="color:#f92672">*</span> float32(<span style="color:#a6e22e">c</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1310</span><span>			} <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">content</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;space-around&#34;</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1311</span><span>				<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">c</span> <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1312</span><span>					<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">X</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">offset</span> <span style="color:#f92672">/</span> <span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1313</span><span>				} <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1314</span><span>					<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">X</span> <span style="color:#f92672">+=</span> (<span style="color:#a6e22e">offset</span> <span style="color:#f92672">*</span> float32(<span style="color:#a6e22e">c</span>)) <span style="color:#f92672">+</span> (<span style="color:#a6e22e">offset</span> <span style="color:#f92672">/</span> <span style="color:#ae81ff">2</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1315</span><span>				}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1316</span><span>			} <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">content</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;normal&#34;</span> <span style="color:#f92672">||</span> <span style="color:#a6e22e">content</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;stretch&#34;</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1317</span><span>				<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">align</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;start&#34;</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1318</span><span>					<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">X</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">offset</span> <span style="color:#f92672">*</span> float32(<span style="color:#a6e22e">c</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1319</span><span>				}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1320</span><span>				<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">align</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;end&#34;</span> <span style="color:#f92672">||</span> <span style="color:#a6e22e">content</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;flex-end&#34;</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1321</span><span>					<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">X</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">offset</span> <span style="color:#f92672">*</span> float32(<span style="color:#a6e22e">c</span><span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1322</span><span>				}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1323</span><span>				<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">align</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;center&#34;</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1324</span><span>					<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">c</span> <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1325</span><span>						<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">X</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">offset</span> <span style="color:#f92672">/</span> <span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1326</span><span>					} <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1327</span><span>						<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">X</span> <span style="color:#f92672">+=</span> (<span style="color:#a6e22e">offset</span> <span style="color:#f92672">*</span> float32(<span style="color:#a6e22e">c</span>)) <span style="color:#f92672">+</span> (<span style="color:#a6e22e">offset</span> <span style="color:#f92672">/</span> <span style="color:#ae81ff">2</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1328</span><span>					}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1329</span><span>				}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1330</span><span>			}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1331</span><span>			<span style="color:#a6e22e">propagateOffsets</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#a6e22e">i</span>], <span style="color:#a6e22e">xStore</span>, <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Y</span>, <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">X</span>, <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Y</span>, <span style="color:#a6e22e">state</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1332</span><span>			(<span style="color:#f92672">*</span><span style="color:#a6e22e">state</span>)[<span style="color:#a6e22e">v</span>.<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>] = <span style="color:#a6e22e">vState</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1333</span><span>		}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1334</span><span>	}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1335</span><span>}
</span></span></code></pre></main>
    </body>
</html>
