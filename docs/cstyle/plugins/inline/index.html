<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link
            rel="shortcut icon"
            href="/assets/logo.webp"
            type="image/x-icon"
        />
        <link rel="stylesheet" href="/style.css" />
        <title>GRIM UI </title>
        
        <script type="module" src="/plugins/issue.js"></script>
        <script type="module" src="/plugins/error.js"></script>
        <script type="module" src="/plugins/mermaid.js"></script>
    </head>
    <body>
        <nav>
            <a href="/"
                ><img src="/assets/logo.webp" alt="" title="DECODE" /> GRIM
                Docs</a
            >
        </nav>
        <main><h1 id="inline-plugin">Inline Plugin</h1>
<h2 id="initgo"><a class="anchor" href="#initgo">#</a> Init?(go)</h2>
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;"><code><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  1</span><span><span style="color:#f92672">package</span> <span style="color:#a6e22e">inline</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  2</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  3</span><span><span style="color:#f92672">import</span> (
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  4</span><span>	<span style="color:#e6db74">&#34;gui/cstyle&#34;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  5</span><span>	<span style="color:#e6db74">&#34;gui/element&#34;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  6</span><span>	<span style="color:#e6db74">&#34;gui/utils&#34;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  7</span><span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  8</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  9</span><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">Init</span>() <span style="color:#a6e22e">cstyle</span>.<span style="color:#a6e22e">Plugin</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 10</span><span>	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">cstyle</span>.<span style="color:#a6e22e">Plugin</span>{
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 11</span><span>		<span style="color:#a6e22e">Styles</span>: <span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#66d9ef">string</span>{
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 12</span><span>			<span style="color:#e6db74">&#34;display&#34;</span>: <span style="color:#e6db74">&#34;inline&#34;</span>,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 13</span><span>		},
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 14</span><span>		<span style="color:#a6e22e">Level</span>: <span style="color:#ae81ff">1</span>,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 15</span><span>		<span style="color:#a6e22e">Handler</span>: <span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">n</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">element</span>.<span style="color:#a6e22e">Node</span>, <span style="color:#a6e22e">state</span> <span style="color:#f92672">*</span><span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#a6e22e">element</span>.<span style="color:#a6e22e">State</span>) {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 16</span><span>			<span style="color:#a6e22e">s</span> <span style="color:#f92672">:=</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">state</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 17</span><span>			<span style="color:#a6e22e">self</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">s</span>[<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 18</span><span>			<span style="color:#a6e22e">parent</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">s</span>[<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Parent</span>.<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 19</span><span>			<span style="color:#a6e22e">copyOfX</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">X</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 20</span><span>			<span style="color:#a6e22e">copyOfY</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">Y</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 21</span><span>			<span style="color:#a6e22e">xCollect</span> <span style="color:#f92672">:=</span> float32(<span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 22</span><span>			<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span>, <span style="color:#a6e22e">v</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Parent</span>.<span style="color:#a6e22e">Children</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 23</span><span>				<span style="color:#a6e22e">vState</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">s</span>[<span style="color:#a6e22e">v</span>.<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 24</span><span>				<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Style</span>[<span style="color:#e6db74">&#34;position&#34;</span>] <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#34;absolute&#34;</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 25</span><span>					<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Style</span>[<span style="color:#e6db74">&#34;display&#34;</span>] <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#34;inline&#34;</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 26</span><span>						<span style="color:#a6e22e">xCollect</span> = <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 27</span><span>					} <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 28</span><span>						<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">v</span>.<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span> <span style="color:#f92672">==</span> <span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 29</span><span>							<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">X</span><span style="color:#f92672">+</span><span style="color:#a6e22e">xCollect</span><span style="color:#f92672">+</span><span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">Width</span> &gt; ((<span style="color:#a6e22e">parent</span>.<span style="color:#a6e22e">Width</span>)<span style="color:#f92672">-</span><span style="color:#a6e22e">parent</span>.<span style="color:#a6e22e">Padding</span>.<span style="color:#a6e22e">Right</span>)<span style="color:#f92672">+</span><span style="color:#a6e22e">parent</span>.<span style="color:#a6e22e">X</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#a6e22e">i</span> &gt; <span style="color:#ae81ff">0</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 30</span><span>								<span style="color:#75715e">// Break Node
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 31</span><span><span style="color:#75715e"></span>								<span style="color:#a6e22e">sibling</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">s</span>[<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Parent</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#a6e22e">i</span><span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>].<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 32</span><span>								<span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">Y</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">sibling</span>.<span style="color:#a6e22e">Height</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 33</span><span>								<span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">X</span> = <span style="color:#a6e22e">copyOfX</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 34</span><span>								<span style="color:#a6e22e">alignText</span>(<span style="color:#a6e22e">n</span>, <span style="color:#a6e22e">s</span>, <span style="color:#a6e22e">i</span>, <span style="color:#a6e22e">state</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 35</span><span>							} <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">i</span> &gt; <span style="color:#ae81ff">0</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 36</span><span>								<span style="color:#75715e">// Node did not break
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 37</span><span><span style="color:#75715e"></span>								<span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">X</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">xCollect</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 38</span><span>							}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 39</span><span>							<span style="color:#66d9ef">break</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 40</span><span>						} <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 41</span><span>							<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Style</span>[<span style="color:#e6db74">&#34;display&#34;</span>] <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;inline&#34;</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 42</span><span>								<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">colliderDetection</span>(<span style="color:#a6e22e">vState</span>, <span style="color:#a6e22e">self</span>) {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 43</span><span>									<span style="color:#a6e22e">xCollect</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Width</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 44</span><span>								} <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 45</span><span>									<span style="color:#a6e22e">xCollect</span> = <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 46</span><span>								}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 47</span><span>							}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 48</span><span>						}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 49</span><span>					}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 50</span><span>				}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 51</span><span>			}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 52</span><span>			<span style="color:#75715e">// !ISSUE: need to align after the end of the block not just the breaks
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 53</span><span><span style="color:#75715e"></span>			<span style="color:#75715e">// alignText(n, s, len(n.Parent.Children)-1, state)
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 54</span><span><span style="color:#75715e"></span>			<span style="color:#a6e22e">propagateOffsets</span>(<span style="color:#a6e22e">n</span>, <span style="color:#a6e22e">copyOfX</span>, <span style="color:#a6e22e">copyOfY</span>, <span style="color:#a6e22e">self</span>, <span style="color:#a6e22e">state</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 55</span><span>			(<span style="color:#f92672">*</span><span style="color:#a6e22e">state</span>)[<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>] = <span style="color:#a6e22e">self</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 56</span><span>		},
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 57</span><span>	}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 58</span><span>}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 59</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 60</span><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">propagateOffsets</span>(<span style="color:#a6e22e">n</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">element</span>.<span style="color:#a6e22e">Node</span>, <span style="color:#a6e22e">copyOfX</span>, <span style="color:#a6e22e">copyOfY</span> <span style="color:#66d9ef">float32</span>, <span style="color:#a6e22e">self</span> <span style="color:#a6e22e">element</span>.<span style="color:#a6e22e">State</span>, <span style="color:#a6e22e">state</span> <span style="color:#f92672">*</span><span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#a6e22e">element</span>.<span style="color:#a6e22e">State</span>) {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 61</span><span>	<span style="color:#a6e22e">s</span> <span style="color:#f92672">:=</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">state</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 62</span><span>	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">v</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Children</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 63</span><span>		<span style="color:#a6e22e">vState</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">s</span>[<span style="color:#a6e22e">v</span>.<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 64</span><span>		<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">X</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">X</span> <span style="color:#f92672">-</span> <span style="color:#a6e22e">copyOfX</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 65</span><span>		<span style="color:#a6e22e">vState</span>.<span style="color:#a6e22e">Y</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">Y</span> <span style="color:#f92672">-</span> <span style="color:#a6e22e">copyOfY</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 66</span><span>		<span style="color:#66d9ef">if</span> len(<span style="color:#a6e22e">v</span>.<span style="color:#a6e22e">Children</span>) &gt; <span style="color:#ae81ff">0</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 67</span><span>			<span style="color:#a6e22e">propagateOffsets</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">v</span>, <span style="color:#a6e22e">copyOfX</span>, <span style="color:#a6e22e">copyOfY</span>, <span style="color:#a6e22e">self</span>, <span style="color:#a6e22e">state</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 68</span><span>		}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 69</span><span>		(<span style="color:#f92672">*</span><span style="color:#a6e22e">state</span>)[<span style="color:#a6e22e">v</span>.<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>] = <span style="color:#a6e22e">vState</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 70</span><span>	}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 71</span><span>}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 72</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 73</span><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">colliderDetection</span>(<span style="color:#a6e22e">s1</span>, <span style="color:#a6e22e">s2</span> <span style="color:#a6e22e">element</span>.<span style="color:#a6e22e">State</span>) <span style="color:#66d9ef">bool</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 74</span><span>	<span style="color:#a6e22e">s1Min</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">s1</span>.<span style="color:#a6e22e">Y</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 75</span><span>	<span style="color:#a6e22e">s1Max</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">s1</span>.<span style="color:#a6e22e">Y</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">s1</span>.<span style="color:#a6e22e">Height</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 76</span><span>	<span style="color:#a6e22e">s2Min</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">s2</span>.<span style="color:#a6e22e">Y</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 77</span><span>	<span style="color:#a6e22e">s2Max</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">s2</span>.<span style="color:#a6e22e">Y</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">s2</span>.<span style="color:#a6e22e">Height</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 78</span><span>	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">s1Min</span> &gt; <span style="color:#a6e22e">s2Min</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#a6e22e">s1Min</span> &lt; <span style="color:#a6e22e">s2Max</span> <span style="color:#f92672">||</span> <span style="color:#a6e22e">s1Max</span> &gt; <span style="color:#a6e22e">s2Min</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#a6e22e">s1Min</span> &lt; <span style="color:#a6e22e">s2Max</span> <span style="color:#f92672">||</span> <span style="color:#a6e22e">s2Min</span> &gt; <span style="color:#a6e22e">s1Min</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#a6e22e">s2Min</span> &lt; <span style="color:#a6e22e">s1Max</span> <span style="color:#f92672">||</span> <span style="color:#a6e22e">s2Max</span> &gt; <span style="color:#a6e22e">s1Min</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#a6e22e">s2Min</span> &lt; <span style="color:#a6e22e">s1Max</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 79</span><span>}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 80</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 81</span><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">alignText</span>(<span style="color:#a6e22e">n</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">element</span>.<span style="color:#a6e22e">Node</span>, <span style="color:#a6e22e">s</span> <span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#a6e22e">element</span>.<span style="color:#a6e22e">State</span>, <span style="color:#a6e22e">i</span> <span style="color:#66d9ef">int</span>, <span style="color:#a6e22e">state</span> <span style="color:#f92672">*</span><span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#a6e22e">element</span>.<span style="color:#a6e22e">State</span>) {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 82</span><span>	<span style="color:#a6e22e">tallest</span> <span style="color:#f92672">:=</span> float32(<span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 83</span><span>	<span style="color:#a6e22e">endex</span> <span style="color:#f92672">:=</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 84</span><span>	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">a</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">i</span>; <span style="color:#a6e22e">a</span> &gt; <span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">a</span><span style="color:#f92672">--</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 85</span><span>		<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">s</span>[<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Parent</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#a6e22e">a</span>].<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>].<span style="color:#a6e22e">Y</span> <span style="color:#f92672">!=</span> <span style="color:#a6e22e">s</span>[<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Parent</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#a6e22e">i</span><span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>].<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>].<span style="color:#a6e22e">Y</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 86</span><span>			<span style="color:#a6e22e">endex</span> = <span style="color:#a6e22e">a</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 87</span><span>			<span style="color:#66d9ef">break</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 88</span><span>		} <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 89</span><span>			<span style="color:#a6e22e">tallest</span> = <span style="color:#a6e22e">utils</span>.<span style="color:#a6e22e">Max</span>(<span style="color:#a6e22e">tallest</span>, <span style="color:#a6e22e">s</span>[<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Parent</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#a6e22e">a</span>].<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>].<span style="color:#a6e22e">Height</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 90</span><span>		}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 91</span><span>	}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 92</span><span>	<span style="color:#75715e">// !ISSUE: Find a better way then -4
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 93</span><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">a</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">i</span>; <span style="color:#a6e22e">a</span> &gt; <span style="color:#a6e22e">endex</span><span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>; <span style="color:#a6e22e">a</span><span style="color:#f92672">--</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 94</span><span>		<span style="color:#a6e22e">p</span> <span style="color:#f92672">:=</span> (<span style="color:#f92672">*</span><span style="color:#a6e22e">state</span>)[<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Parent</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#a6e22e">a</span>].<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 95</span><span>		<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">p</span>.<span style="color:#a6e22e">Height</span> <span style="color:#f92672">!=</span> <span style="color:#a6e22e">tallest</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 96</span><span>			<span style="color:#a6e22e">p</span>.<span style="color:#a6e22e">Y</span> <span style="color:#f92672">+=</span> (<span style="color:#a6e22e">tallest</span> <span style="color:#f92672">-</span> <span style="color:#a6e22e">p</span>.<span style="color:#a6e22e">Height</span>) <span style="color:#f92672">-</span> <span style="color:#ae81ff">5</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 97</span><span>			(<span style="color:#f92672">*</span><span style="color:#a6e22e">state</span>)[<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Parent</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#a6e22e">a</span>].<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>] = <span style="color:#a6e22e">p</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 98</span><span>		}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 99</span><span>	}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">100</span><span>	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">a</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">i</span>; <span style="color:#a6e22e">a</span> &lt; len(<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Parent</span>.<span style="color:#a6e22e">Children</span>)<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>; <span style="color:#a6e22e">a</span><span style="color:#f92672">++</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">101</span><span>		<span style="color:#a6e22e">p</span> <span style="color:#f92672">:=</span> (<span style="color:#f92672">*</span><span style="color:#a6e22e">state</span>)[<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Parent</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#a6e22e">a</span>].<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">102</span><span>		<span style="color:#a6e22e">p</span>.<span style="color:#a6e22e">Y</span> <span style="color:#f92672">+=</span> <span style="color:#ae81ff">7</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">103</span><span>		(<span style="color:#f92672">*</span><span style="color:#a6e22e">state</span>)[<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">Parent</span>.<span style="color:#a6e22e">Children</span>[<span style="color:#a6e22e">a</span>].<span style="color:#a6e22e">Properties</span>.<span style="color:#a6e22e">Id</span>] = <span style="color:#a6e22e">p</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">104</span><span>	}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">105</span><span>}
</span></span></code></pre></main>
    </body>
</html>
